// Version: 3.7.18
(function(){
var p=!0,v=null,w=!1;function D(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function a(){try{return this.valueOf()}catch(a){return v}}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=l[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(d,C){var x,s,l,q,E,I=e,t=C[d];t&&"object"===typeof t&&(t=a.call(t));"function"===typeof m&&(t=m.call(C,d,t));switch(typeof t){case "string":return c(t);case "number":return isFinite(t)?String(t):"null";case "boolean":case "null":return String(t);
case "object":if(!t)return"null";e+=h;E=[];if("[object Array]"===Object.prototype.toString.apply(t)){q=t.length;for(x=0;x<q;x+=1)E[x]=b(x,t)||"null";l=0===E.length?"[]":e?"[\n"+e+E.join(",\n"+e)+"\n"+I+"]":"["+E.join(",")+"]";e=I;return l}if(m&&"object"===typeof m){q=m.length;for(x=0;x<q;x+=1)s=m[x],"string"===typeof s&&(l=b(s,t))&&E.push(c(s)+(e?": ":":")+l)}else for(s in t)Object.hasOwnProperty.call(t,s)&&(l=b(s,t))&&E.push(c(s)+(e?": ":":")+l);l=0===E.length?"{}":e?"{\n"+e+E.join(",\n"+e)+"\n"+
I+"}":"{"+E.join(",")+"}";e=I;return l}}window.JSON||(window.JSON={});var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,h,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var l;h=e="";if("number"===typeof d)for(l=0;l<d;l+=1)h+=" ";else"string"===typeof d&&(h=d);if((m=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==
typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var ha=function(){return"x"+ ++ga+""+ +new Date},ka=function(){return+new Date},na=function(a,c){var b=a.join(la),d=[];if(!c)return b;F(c,function(a,b){var c="object"==typeof b?JSON.stringify(b):b;"undefined"!=typeof b&&(b!=v&&0<encodeURIComponent(c).length)&&d.push(a+"="+encodeURIComponent(c))});return b+="?"+d.join(ma)},ra=function(a,c){function b(){e+c>ka()?(clearTimeout(d),d=setTimeout(b,c)):(e=ka(),a())}var d,e=0;return b},sa=function(a,c){var b=[];F(a||[],function(a){c(a)&&
b.push(a)});return b},ua=function(a,c){return a.replace(ta,function(a,d){return c[d]||a})},va=function(a){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)});a&&a(c);return c},xa=function(a){return!!a&&"string"!==typeof a&&(Array.isArray&&Array.isArray(a)||"number"===typeof a.length)},F=function(a,c){if(a&&c)if(xa(a))for(var b=0,d=a.length;b<d;)c.call(a[b],a[b],b++);else for(b in a)a.hasOwnProperty&&a.hasOwnProperty(b)&&
c.call(a[b],b,a[b])},ya=function(a,c){var b=[];F(a||[],function(a,e){b.push(c(a,e))});return b},za=function(a){return encodeURIComponent(a).replace(/[!'()*~]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})},Ba=function(a,c){var b=[];F(a,function(a,e){c?0>a.search("-pnpres")&&e.z&&b.push(a):e.z&&b.push(a)});return b.sort()},Ca=function(a,c){var b=[];F(a,function(a,e){c?0>a.search("-pnpres")&&e.z&&b.push(a):e.z&&b.push(a)});return b.sort()},Fa=function(){setTimeout(function(){Da||
(Da=1,F(Ea,function(a){a()}))},J)},Ha=function(){function a(a){a=a||{};a.hasOwnProperty("encryptKey")||(a.encryptKey=r.encryptKey);a.hasOwnProperty("keyEncoding")||(a.keyEncoding=r.keyEncoding);a.hasOwnProperty("keyLength")||(a.keyLength=r.keyLength);a.hasOwnProperty("mode")||(a.mode=r.mode);-1==h.indexOf(a.keyEncoding.toLowerCase())&&(a.keyEncoding=r.keyEncoding);-1==l.indexOf(parseInt(a.keyLength,10))&&(a.keyLength=r.keyLength);-1==m.indexOf(a.mode.toLowerCase())&&(a.mode=r.mode);return a}function c(a,
b){a="base64"==b.keyEncoding?K.enc.Base64.parse(a):"hex"==b.keyEncoding?K.enc.Hex.parse(a):a;return b.encryptKey?K.enc.Utf8.parse(K.SHA256(a).toString(K.enc.Hex).slice(0,32)):a}function b(a){return"ecb"==a.mode?K.mode.ECB:K.mode.CBC}function d(a){return"cbc"==a.mode?K.enc.Utf8.parse(e):v}var e="0123456789012345",h=["hex","utf8","base64","binary"],l=[128,256],m=["ecb","cbc"],r={encryptKey:p,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(e,h,m){if(!h)return e;var m=a(m),l=d(m),
r=b(m),h=c(h,m),m=JSON.stringify(e);return K.AES.encrypt(m,h,{iv:l,mode:r}).ciphertext.toString(K.enc.Base64)||e},decrypt:function(e,h,m){if(!h)return e;var m=a(m),l=d(m),r=b(m),h=c(h,m);try{var E=K.enc.Base64.parse(e),I=K.AES.decrypt({ciphertext:E},h,{iv:l,mode:r}).toString(K.enc.Utf8);return JSON.parse(I)}catch(t){}}}},Ia=function(a,c){return K.HmacSHA256(a,c).toString(K.enc.Base64)},Ja=function(a){return document.getElementById(a)},Ka=function(a){console.error(a)},La=function(a,c){var b=[];F(a.split(/\s+/),
function(a){F((c||document).getElementsByTagName(a),function(a){b.push(a)})});return b},Ma=function(a,c,b){F(a.split(","),function(a){function e(a){a||(a=window.event);b(a)||(a.cancelBubble=p,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}c.addEventListener?c.addEventListener(a,e,w):c.attachEvent?c.attachEvent("on"+a,e):c["on"+a]=e})},Na=function(){return La("head")[0]},Oa=function(a,c,b){if(b)a.setAttribute(c,b);else return a&&a.getAttribute&&a.getAttribute(c)},Pa=function(a,
c){for(var b in c)if(c.hasOwnProperty(b))try{a.style[b]=c[b]+(0<"|width|height|top|left|".indexOf(b)&&"number"==typeof c[b]?"px":"")}catch(d){}},Qa=function(a){return document.createElement(a)},Va=function(){return Ta||Ua()?0:ha()},Xa=function(a){function c(a,b){y||(y=1,t.onerror=v,clearTimeout(f),a||!b||i(b),setTimeout(function(){a&&g();var b=Ja(B),c=b&&b.parentNode;c&&c.removeChild(b)},J))}if(Ta||Ua()){a:{var b,d,e=function(){if(!l){l=1;clearTimeout(r);try{d=JSON.parse(b.responseText)}catch(a){return q(1)}h=
1;s(d)}},h=0,l=0,m=a.timeout||Wa,r=setTimeout(function(){q(1,{message:"timeout"})},m),C=a.i||D(),x=a.data||{},s=a.j||D(),A=!a.X,q=function(a,c){h||(h=1,clearTimeout(r),b&&(b.onerror=b.onload=v,b.abort&&b.abort(),b=v),a&&C(c))};try{b=Ua()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;b.onerror=b.onabort=function(a){q(1,a||b&&b.responseText||{error:"Network Connection Error"})};b.onload=b.onloadend=e;b.onreadystatechange=function(){if(b&&4==b.readyState)switch(b.status){case 200:break;
default:try{d=JSON.parse(b.responseText),q(1,d)}catch(a){return q(1,{status:b.status,lb:v,message:b.responseText})}}};var E=na(a.url,x);b.open("GET",E,A);A&&(b.timeout=m);b.send()}catch(I){q(0);Ta=0;a=Xa(a);break a}a=q}return a}var t=Qa("script"),e=a.h,B=ha(),y=0,f=setTimeout(function(){c(1,{message:"timeout"})},a.timeout||Wa),g=a.i||D(),m=a.data||{},i=a.j||D();window[e]=function(a){c(0,a)};a.X||(t[Ya]=Ya);t.onerror=function(){c(1)};t.src=na(a.url,m);Oa(t,"id",B);Na().appendChild(t);return c},Za=
function(){if(!("onLine"in navigator))return 1;try{return navigator.onLine}catch(a){return p}},$a=function(a){return!("sendBeacon"in navigator)?w:navigator.sendBeacon(a)},Ua=function(){if(!ab||!ab.get)return 0;var a={id:Ua.id++,send:D(),abort:function(){a.id={}},open:function(c,b){Ua[a.id]=a;ab.get(a.id,b)}};return a},ga=1,Da=w,Ea=[],bb="-pnpres",Wa=15E3,J=1E3,la="/",ma="&",ta=/{([\w\-]+)}/g,cb,db=Math.floor(20*Math.random());cb=function(a,c){return 0<a.indexOf("pubsub.")&&a.replace("pubsub","ps"+
(c?va().split("-")[0]:20>++db?db:db=1))||a};var Ya="async",eb=navigator.userAgent,Ta=-1==eb.indexOf("MSIE 6");window.console||(window.console=window.console||{});console.log||(console.log=console.error=(window.opera||{}).postError||D());var fb,gb={},hb=w;try{hb=window.localStorage}catch(ib){}var ob=function(a){return-1==document.cookie.indexOf(a)?v:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||v},pb=function(a,c){document.cookie=a+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"},
qb;try{pb("pnctest","1"),qb="1"===ob("pnctest")}catch(rb){qb=w}fb={get:function(a){try{return hb?hb.getItem(a):qb?ob(a):gb[a]}catch(c){return gb[a]}},set:function(a,c){try{if(hb)return hb.setItem(a,c)&&0;qb&&pb(a,c);gb[a]=c}catch(b){gb[a]=c}}};var sb={list:{},unbind:function(a){sb.list[a]=[]},bind:function(a,c){(sb.list[a]=sb.list[a]||[]).push(c)},fire:function(a,c){F(sb.list[a]||[],function(a){a(c)})}},tb=Ja("pubnub")||0,ub=function(a){function c(){}function b(a,b){function c(b){b&&(Ab=ka()-(b/1E4+
(ka()-d)/2),a&&a(Ab))}var d=ka();b&&c(b)||G.time(c)}function d(a,b){jb&&jb(a,b);jb=v;clearTimeout(ba);clearTimeout(ca)}function e(){Mc&&G.time(function(a){b(D(),a);a||d(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."});ca&&clearTimeout(ca);ca=setTimeout(e,Wb)})}function h(){Pc()||d(1,{error:"Offline. Please check your network settings. "});ba&&clearTimeout(ba);ba=setTimeout(h,J)}function l(a,b,c,d){var b=a.callback||b,e=a.error||u,h=T(),d=d||{};d.auth||
(d.auth=a.auth_key||L);a=[W,"v1","channel-registration","sub-key",z];a.push.apply(a,c);h&&(d.callback=h);N({h:h,data:B(d),j:function(a){r(a,b,e)},i:function(a){m(a,e)},url:a})}function m(a,b){if("object"==typeof a&&a.error){var c={};a.message&&(c.message=a.message);a.payload&&(c.payload=a.payload);b&&b(c)}else b&&b(a)}function r(a,b,c){if("object"==typeof a){if(a.error){b={};a.message&&(b.message=a.message);a.payload&&(b.payload=a.payload);c&&c(b);return}if(a.payload){a.next_page?b&&b(a.payload,a.next_page):
b&&b(a.payload);return}}b&&b(a)}function C(a){var b=0;F(Ba(H),function(c){if(c=H[c])b++,(a||D())(c)});return b}function x(a){var b=0;F(Ca(X),function(c){if(c=X[c])b++,(a||D())(c)})}function s(a){if(Qc){if(!oa.length)return}else{a&&(oa.Aa=0);if(oa.Aa||!oa.length)return;oa.Aa=1}N(oa.shift())}function A(){!Bb&&q()}function q(){clearTimeout(pa);!O||500<=O||1>O||!Ba(H,p).length&&!Ca(X,p).length?Bb=w:(Bb=p,G.presence_heartbeat({callback:function(){pa=setTimeout(q,O*J)},error:function(a){u&&u("Presence Heartbeat unable to reach Pubnub servers."+
JSON.stringify(a));pa=setTimeout(q,O*J)}}))}function E(a,b){return wa.decrypt(a,b||da)||wa.decrypt(a,da)||a}function I(a,b,c){var d=w;if("undefined"===typeof a)return b;if("number"===typeof a)d=5<a||0==a?w:p;else{if("boolean"===typeof a)return a?30:0;d=p}return d?(c&&c("Presence Heartbeat value invalid. Valid range ( x > 5 or x = 0). Current Value : "+(b||5)),b||5):a}function t(a){var b="",c=[];F(a,function(a){c.push(a)});var d=c.sort(),e;for(e in d){var h=d[e],b=b+(h+"="+za(a[h]));e!=d.length-1&&
(b+="&")}return b}function B(a){a||(a={});F(dc,function(b,c){b in a||(a[b]=c)});return a}function y(a){return ub(a)}Ta=a.jsonp?0:-1==eb.indexOf("MSIE 6");var f=a.subscribe_key||"";a.uuid||fb.get(f+"uuid");var g=a.leave_on_unload||0;a.xdr=Xa;a.db=fb;a.error=a.error||Ka;a._is_online=Za;a.jsonp_cb=Va;a.hmac_SHA256=Ia;a.crypto_obj=Ha();a.sendBeacon=$a;a.params={pnsdk:"PubNub-JS-Web/3.7.18"};var i=+a.windowing||10,j=(+a.timeout||310)*J,Wb=(+a.keepalive||60)*J,Mc=a.timecheck||0,Xb=a.noleave||0,ea=a.publish_key,
z=a.subscribe_key,L=a.auth_key||"",kb=a.secret_key||"",ec=a.hmac_SHA256,qa=a.ssl?"s":"",Ga="http"+qa+"://"+(a.origin||"pubsub.pubnub.com"),W=cb(Ga),fc=cb(Ga),oa=[],Cb=p,Ab=0,Db=0,gc=0,jb=0,Aa=a.restore||0,Z=0,Sa=w,H={},X={},fa={},pa=v,$=I(a.heartbeat||a.pnexpires||0,a.error),O=a.heartbeat_interval||$/2-1,Bb=w,Qc=a.no_wait_for_pending,hc=a["compatible_3.5"]||w,N=a.xdr,dc=a.params||{},Rc=a.get_current_time||function(){return Date.now()},u=a.error||D(),Pc=a._is_online||function(){return 1},T=a.jsonp_cb||
function(){return 0},ia=a.db||{get:D(),set:D()},da=a.cipher_key,M=a.uuid||!a.unique_uuid&&ia&&ia.get(z+"uuid")||"",Sc=a.ortt||w,Tc=-1,ja=a.instance_id||w,aa="",ic=a.shutdown,lb=("undefined"!=typeof a.use_send_beacon?a.use_send_beacon:1)?a.sendBeacon:v,ba,ca,Eb,mb;2===$&&(O=1);var wa=a.crypto_obj||{encrypt:function(a){return a},decrypt:function(a){return a}},G={LEAVE:function(a,b,c,d,e){var c={uuid:M,auth:c||L},h=cb(Ga),d=d||D(),f=e||D(),e=T();if(0<a.indexOf(bb))return p;if(hc&&(!qa||"0"==e)||Xb)return w;
"0"!=e&&(c.callback=e);ja&&(c.instanceid=aa);a=[h,"v2","presence","sub_key",z,"channel",encodeURIComponent(a),"leave"];c=B(c);if(lb&&(url_string=na(a,c),lb(url_string)))return d&&d({status:200,action:"leave",message:"OK",service:"Presence"}),p;N({X:b||qa,h:e,data:c,j:function(a){r(a,d,f)},i:function(a){m(a,f)},url:a});return p},LEAVE_GROUP:function(a,b,c,d,e){var c={uuid:M,auth:c||L},h=cb(Ga),d=d||D(),f=e||D(),e=T();if(0<a.indexOf(bb))return p;if(hc&&(!qa||"0"==e)||Xb)return w;"0"!=e&&(c.callback=
e);a&&0<a.length&&(c["channel-group"]=a);ja&&(c.instanceid=aa);a=[h,"v2","presence","sub_key",z,"channel",encodeURIComponent(","),"leave"];c=B(c);if(lb&&(url_string=na(a,c),lb(url_string)))return d&&d({status:200,action:"leave",message:"OK",service:"Presence"}),p;N({X:b||qa,h:e,data:c,j:function(a){r(a,d,f)},i:function(a){m(a,f)},url:a});return p},set_resumed:function(a){Sa=a},get_cipher_key:function(){return da},set_cipher_key:function(a){da=a},raw_encrypt:function(a,b){return wa.encrypt(a,b||da)||
a},raw_decrypt:function(a,b){return E(a,b)},get_heartbeat:function(){return $},set_heartbeat:function(a,b){$=I(a,$,u);O=b||$/2-1;2==$&&(O=1);c();q()},get_heartbeat_interval:function(){return O},set_heartbeat_interval:function(a){O=a;q()},get_version:function(){return"3.7.18"},getGcmMessageObject:function(a){return{data:a}},getApnsMessageObject:function(a){var b={aps:{badge:1,alert:""}};for(k in a)k[b]=a[k];return b},newPnMessage:function(){var a={};gcm&&(a.pn_gcm=gcm);apns&&(a.pn_apns=apns);for(k in n)a[k]=
n[k];return a},_add_param:function(a,b){dc[a]=b},channel_group:function(a,b){var c=a.channel_group,b=b||a.callback,d=a.channels||a.channel,e=a.cloak,h,f,m=[],i={},g=a.mode||"add";c&&(c=c.split(":"),1<c.length?(h="*"===c[0]?v:c[0],f=c[1]):f=c[0]);h&&m.push("namespace")&&m.push(encodeURIComponent(h));m.push("channel-group");f&&"*"!==f&&m.push(f);d?(xa(d)&&(d=d.join(",")),i[g]=d,i.cloak=Cb?"true":"false"):"remove"===g&&m.push("remove");"undefined"!=typeof e&&(i.cloak=e?"true":"false");l(a,b,m,i)},channel_group_list_groups:function(a,
b){var c;(c=a.namespace||a.ns||a.channel_group||v)&&(a.channel_group=c+":*");G.channel_group(a,b)},channel_group_list_channels:function(a,b){if(!a.channel_group)return u("Missing Channel Group");G.channel_group(a,b)},channel_group_remove_channel:function(a,b){if(!a.channel_group)return u("Missing Channel Group");if(!a.channel&&!a.channels)return u("Missing Channel");a.mode="remove";G.channel_group(a,b)},channel_group_remove_group:function(a,b){if(!a.channel_group)return u("Missing Channel Group");
if(a.channel)return u("Use channel_group_remove_channel if you want to remove a channel from a group.");a.mode="remove";G.channel_group(a,b)},channel_group_add_channel:function(a,b){if(!a.channel_group)return u("Missing Channel Group");if(!a.channel&&!a.channels)return u("Missing Channel");G.channel_group(a,b)},channel_group_cloak:function(a,b){"undefined"==typeof a.cloak?b(Cb):(Cb=a.cloak,G.channel_group(a,b))},channel_group_list_namespaces:function(a,b){l(a,b,["namespace"])},channel_group_remove_namespace:function(a,
b){l(a,b,["namespace",a.namespace,"remove"])},history:function(a,b){var b=a.callback||b,c=a.count||a.limit||100,d=a.reverse||"false",e=a.error||D(),h=a.auth_key||L,f=a.cipher_key,i=a.channel,g=a.channel_group,j=a.start,l=a.end,r=a.include_token,s=a.string_message_token||w,q={},t=T();if(!i&&!g)return u("Missing Channel");if(!b)return u("Missing Callback");if(!z)return u("Missing Subscribe Key");q.stringtoken="true";q.count=c;q.reverse=d;q.auth=h;g&&(q["channel-group"]=g,i||(i=","));t&&(q.callback=
t);j&&(q.start=j);l&&(q.end=l);r&&(q.include_token="true");s&&(q.string_message_token="true");N({h:t,data:B(q),j:function(a){if("object"==typeof a&&a.error)e({message:a.message,payload:a.payload});else{for(var c=a[0],d=[],Ra=0;Ra<c.length;Ra++)if(r){var h=E(c[Ra].message,f),i=c[Ra].timetoken;try{d.push({message:JSON.parse(h),timetoken:i})}catch(m){d.push({message:h,timetoken:i})}}else{h=E(c[Ra],f);try{d.push(JSON.parse(h))}catch(g){d.push(h)}}b([d,a[1],a[2]])}},i:function(a){m(a,e)},url:[W,"v2","history",
"sub-key",z,"channel",encodeURIComponent(i)]})},replay:function(a,b){var b=b||a.callback||D(),c=a.auth_key||L,d=a.source,e=a.destination,h=a.stop,f=a.start,i=a.end,m=a.reverse,g=a.limit,j=T(),l={};if(!d)return u("Missing Source Channel");if(!e)return u("Missing Destination Channel");if(!ea)return u("Missing Publish Key");if(!z)return u("Missing Subscribe Key");"0"!=j&&(l.callback=j);h&&(l.stop="all");m&&(l.reverse="true");f&&(l.start=f);i&&(l.end=i);g&&(l.count=g);l.auth=c;N({h:j,j:function(a){r(a,
b,err)},i:function(){b([0,"Disconnected"])},url:[W,"v1","replay",ea,z,d,e],data:B(l)})},auth:function(a){L=a;c()},time:function(a){var b=T(),c={uuid:M,auth:L};ja&&(c.instanceid=aa);N({h:b,data:B(c),url:[W,"time",b],j:function(b){a(b[0])},i:function(){a(0)}})},publish:function(a,b){var c=a.message;if(!c)return u("Missing Message");var b=b||a.callback||c.callback||D(),d=a.channel||c.channel,e=a.auth_key||L,h=a.cipher_key,f=a.error||c.error||D(),i=a.post||w,g="store_in_history"in a?a.store_in_history:
p,j=T(),l="push",q=a.meta||a.metadata;a.prepend&&(l="unshift");if(!d)return u("Missing Channel");if(!ea)return u("Missing Publish Key");if(!z)return u("Missing Subscribe Key");c.getPubnubMessage&&(c=c.getPubnubMessage());c=JSON.stringify(wa.encrypt(c,h||da)||c);c=[W,"publish",ea,z,0,encodeURIComponent(d),j,encodeURIComponent(c)];e={uuid:M,auth:e,seqn:++Tc%65535};Sc&&(d=Rc().toString(),17>d.length&&(d+=Array(17-d.length+1).join("0")),e.ortt={t:d});q&&"object"===typeof q&&(e.meta=JSON.stringify(q));
g||(e.store="0");ja&&(e.instanceid=aa);oa[l]({h:j,url:c,data:B(e),i:function(a){m(a,f);s(1)},j:function(a){r(a,b,f);s(1)},mode:i?"POST":"GET"});s()},unsubscribe:function(a,b){var d=a.channel,e=a.channel_group,h=a.auth_key||L,b=b||a.callback||D(),f=a.error||D();Z=0;Aa=1;if(d){var i=ya((d.join?d.join(","):""+d).split(","),function(a){if(H[a])return a}).join(","),d=ya((d.join?d.join(","):""+d).split(","),function(a){if(H[a])return a+","+a+bb}).join(",");F(d.split(","),function(a){a&&(H[a]=0,a in fa&&
delete fa[a])});d=p;Da&&(d=G.LEAVE(i,0,h,b,f));d||b({action:"leave"})}e&&(i=ya((e.join?e.join(","):""+e).split(","),function(a){if(X[a])return a}).join(","),e=ya((e.join?e.join(","):""+e).split(","),function(a){if(X[a])return a+","+a+bb}).join(","),F(e.split(","),function(a){a&&(X[a]=0,a in fa&&delete fa[a])}),d=p,Da&&(d=G.LEAVE_GROUP(i,0,h,b,f)),d||b({action:"leave"}));c()},subscribe:function(a,b){function e(a){a?setTimeout(c,ba):(W=cb(Ga,1),fc=cb(Ga,1),setTimeout(function(){G.time(e)},J));C(function(b){if(a&&
b.n)return b.n=0,b.ga(b.name);!a&&!b.n&&(b.n=1,b.ca(b.name))});x(function(b){if(a&&b.n)return b.n=0,b.ga(b.name);!a&&!b.n&&(b.n=1,b.ca(b.name))})}function h(){function a(b,c,d){"undefined"!==typeof b[c]&&(b[d]=b[c],delete b[c]);return p}function b(d){if(!d||"object"==typeof d&&"error"in d&&d.error)return errcb(d.error),setTimeout(c,J);t(d.t.t);Z=!Z&&Aa&&ia.get(z)||d.t.t;Eb=d.t.r;C(function(a){a.l||(a.l=1,a.I(a.name))});x(function(a){a.l||(a.l=1,a.I(a.name))});if(Sa&&!Aa)Z=0,Sa=w,ia.set(z,0);else{O&&
(Z=1E4,O=0);ia.set(z,d.t.t);var d=d.m,e;for(e in d){var f=d[e],g=f.c,i=f.b,i=H[i]||X[i]||H[g];0<=g.indexOf("-pnpres")&&(i=H[g],g=g.split("-pnpres")[0]);if(i){var i=i.callback,j=E(f.d,H[f.b||f.c]?H[f.b||f.c].cipher_key:v);if(i){var m=f.b||f.c;f.o&&a(f.o,"t","timetoken")&&a(f.o,"r","region_code");f.p&&a(f.p,"t","timetoken")&&a(f.p,"r","region_code");a(f,"a","shard");a(f,"b","subscription_match");a(f,"c","channel");a(f,"d","payload");a(f,"ear","eat_after_reading");a(f,"f","flags");a(f,"i","issuing_client_id");
a(f,"k","subscribe_key");a(f,"s","sequence_number");a(f,"o","origination_timetoken");a(f,"p","publish_timetoken");a(f,"r","replication_map");a(f,"u","user_metadata");a(f,"w","waypoint_list");i(j,m,g,f)}}}}setTimeout(h,ba)}function f(a){if(!a||"object"==typeof a&&"error"in a&&a.error)return errcb(a.error),setTimeout(c,J);t(a[1]);Z=!Z&&Aa&&ia.get(z)||a[1];C(function(a){a.l||(a.l=1,a.I(a.name))});x(function(a){a.l||(a.l=1,a.I(a.name))});if(Sa&&!Aa)Z=0,Sa=w,ia.set(z,0);else{O&&(Z=1E4,O=0);ia.set(z,a[1]);
var b,d="",e="";3<a.length?(d=a[3],e=a[2]):d=2<a.length?a[2]:ya(Ba(H),function(b){return ya(Array(a[0].length).join(",").split(","),function(){return b})}).join(",");var i=d.split(","),g=e?e.split(","):[];b=function(){var a=i.shift()||gc,b=g.shift(),c={};b?(a&&(0<=a.indexOf("-pnpres")&&0>b.indexOf("-pnpres"))&&(b+="-pnpres"),c=X[b]||H[b]||{callback:D()}):c=H[a];a=[c.h||Db,a.split(bb)[0]];b&&a.push(b.split(bb)[0]);return a};var j=ka()-Ab-+a[1]/1E4;F(a[0],function(c){var d=b(),c=E(c,H[d[1]]?H[d[1]].cipher_key:
v);d[0]&&d[0](c,a,d[2]||d[1],j,d[1])})}setTimeout(h,ba)}var i=T(),g=Ba(H).join(","),j=Ca(X).join(",");if(g||j){g||(g=",");d();var l=B({uuid:M,auth:L});mb&&0<mb.length&&(l["filter-expr"]=mb);j&&(l["channel-group"]=j);2<JSON.stringify(fa).length&&(l.state=JSON.stringify(fa));$&&(l.heartbeat=$);ja&&(l.instanceid=aa);A();g=[fc,(da?"v2/":"")+"subscribe",z,encodeURIComponent(g),i];da?(l.tt=Z,Eb&&(l.tr=Eb)):g.push(Z);jb=N({timeout:oa,h:i,i:function(a){a&&a.error&&a.service?(m(a,s),e(1)):G.time(function(b){!b&&
m(a,s);e(b)})},data:B(l),url:g,j:da?b:f})}}var f=a.channel,g=a.channel_group,b=(b=b||a.callback)||a.message,l=a.connect||D(),q=a.reconnect||D(),r=a.disconnect||D(),s=a.error||s||D(),t=a.idle||D(),y=a.presence||0,I=a.noheresync||0,O=a.backfill||0,ea=a.timetoken||0,oa=a.timeout||j,ba=a.windowing||i,ca=a.state,da=a.v2,pa=a.heartbeat||a.pnexpires,qa=a.heartbeat_interval,wa=a.restore||Aa;L=a.auth_key||L;mb=a.filter_expr;Aa=wa;Z=ea;if(!f&&!g)return u("Missing Channel");if(!b)return u("Missing Callback");
if(!z)return u("Missing Subscribe Key");(pa||0===pa||qa||0===qa)&&G.set_heartbeat(pa,qa);f&&F((f.join?f.join(","):""+f).split(","),function(c){var d=H[c]||{};H[gc=c]={name:c,l:d.l,n:d.n,z:1,h:Db=b,cipher_key:a.cipher_key,I:l,ca:r,ga:q};ca&&(fa[c]=c in ca?ca[c]:ca);y&&(G.subscribe({channel:c+bb,callback:y,restore:wa}),!d.z&&!I&&G.here_now({channel:c,data:B({uuid:M,auth:L}),callback:function(a){F("uuids"in a?a.uuids:[],function(b){y({action:"join",uuid:b,timestamp:Math.floor(ka()/1E3),occupancy:a.occupancy||
1},a,c)})}}))});g&&F((g.join?g.join(","):""+g).split(","),function(c){var d=X[c]||{};X[c]={name:c,l:d.l,n:d.n,z:1,h:Db=b,cipher_key:a.cipher_key,I:l,ca:r,ga:q};y&&(G.subscribe({channel_group:c+bb,callback:y,restore:wa,v2:da,auth_key:L}),!d.z&&!I&&G.here_now({channel_group:c,data:B({uuid:M,auth:L}),callback:function(a){F("uuids"in a?a.uuids:[],function(b){y({action:"join",uuid:b,timestamp:Math.floor(ka()/1E3),occupancy:a.occupancy||1},a,c)})}}))});c=function(){d();setTimeout(h,ba)};if(!Da)return Ea.push(c);
c()},here_now:function(a,b){var b=a.callback||b,c=a.debug,d=a.error||D(),e=a.auth_key||L,f=a.channel,h=a.channel_group,i=T(),g=a.state,e={uuid:M,auth:e};if(!("uuids"in a?a.uuids:1))e.disable_uuids=1;g&&(e.state=1);if(!b)return u("Missing Callback");if(!z)return u("Missing Subscribe Key");g=[W,"v2","presence","sub_key",z];f&&g.push("channel")&&g.push(encodeURIComponent(f));"0"!=i&&(e.callback=i);h&&(e["channel-group"]=h,!f&&g.push("channel")&&g.push(","));ja&&(e.instanceid=aa);N({h:i,data:B(e),j:function(a){r(a,
b,d)},i:function(a){m(a,d)},debug:c,url:g})},where_now:function(a,b){var b=a.callback||b,c=a.error||D(),d=a.auth_key||L,e=T(),f=a.uuid||M,d={auth:d};if(!b)return u("Missing Callback");if(!z)return u("Missing Subscribe Key");"0"!=e&&(d.callback=e);ja&&(d.instanceid=aa);N({h:e,data:B(d),j:function(a){r(a,b,c)},i:function(a){m(a,c)},url:[W,"v2","presence","sub_key",z,"uuid",encodeURIComponent(f)]})},state:function(a,b){var b=a.callback||b||D(),c=a.error||D(),d=a.auth_key||L,e=T(),f=a.state,h=a.uuid||
M,g=a.channel,i=a.channel_group,d=B({auth:d});if(!z)return u("Missing Subscribe Key");if(!h)return u("Missing UUID");if(!g&&!i)return u("Missing Channel");"0"!=e&&(d.callback=e);"undefined"!=typeof g&&H[g]&&H[g].z&&f&&(fa[g]=f);"undefined"!=typeof i&&(X[i]&&X[i].z)&&(f&&(fa[i]=f),d["channel-group"]=i,g||(g=","));d.state=JSON.stringify(f);ja&&(d.instanceid=aa);f=f?[W,"v2","presence","sub-key",z,"channel",g,"uuid",h,"data"]:[W,"v2","presence","sub-key",z,"channel",g,"uuid",encodeURIComponent(h)];N({h:e,
data:B(d),j:function(a){r(a,b,c)},i:function(a){m(a,c)},url:f})},grant:function(a,b){var b=a.callback||b,c=a.error||D(),d=a.channel||a.channels,e=a.channel_group,f=T(),h=a.ttl,g=a.read?"1":"0",i=a.write?"1":"0",j=a.manage?"1":"0",l=a.auth_key||a.auth_keys;if(!b)return u("Missing Callback");if(!z)return u("Missing Subscribe Key");if(!ea)return u("Missing Publish Key");if(!kb)return u("Missing Secret Key");var q=z+"\n"+ea+"\ngrant\n",g={w:i,r:g,timestamp:Math.floor((new Date).getTime()/1E3)};a.manage&&
(g.m=j);xa(d)&&(d=d.join(","));xa(l)&&(l=l.join(","));"undefined"!=typeof d&&(d!=v&&0<d.length)&&(g.channel=d);"undefined"!=typeof e&&(e!=v&&0<e.length)&&(g["channel-group"]=e);"0"!=f&&(g.callback=f);if(h||0===h)g.ttl=h;l&&(g.auth=l);g=B(g);l||delete g.auth;q+=t(g);d=ec(q,kb);d=d.replace(/\+/g,"-");d=d.replace(/\//g,"_");g.signature=d;N({h:f,data:g,j:function(a){r(a,b,c)},i:function(a){m(a,c)},url:[W,"v1","auth","grant","sub-key",z]})},mobile_gw_provision:function(a){var b=a.callback||D(),c=a.auth_key||
L,d=a.error||D(),e=T(),f=a.channel,g=a.op,h=a.gw_type,a=a.device_id;if(!a)return u("Missing Device ID (device_id)");if(!h)return u("Missing GW Type (gw_type: gcm or apns)");if(!g)return u("Missing GW Operation (op: add or remove)");if(!f)return u("Missing gw destination Channel (channel)");if(!ea)return u("Missing Publish Key");if(!z)return u("Missing Subscribe Key");a=[W,"v1/push/sub-key",z,"devices",a];c={uuid:M,auth:c,type:h};"add"==g?c.add=f:"remove"==g&&(c.remove=f);ja&&(data.instanceid=aa);
N({h:e,data:c,j:function(a){r(a,b,d)},i:function(a){m(a,d)},url:a})},audit:function(a,b){var b=a.callback||b,c=a.error||D(),d=a.channel,e=a.channel_group,f=a.auth_key,g=T();if(!b)return u("Missing Callback");if(!z)return u("Missing Subscribe Key");if(!ea)return u("Missing Publish Key");if(!kb)return u("Missing Secret Key");var h=z+"\n"+ea+"\naudit\n",i={timestamp:Math.floor((new Date).getTime()/1E3)};"0"!=g&&(i.callback=g);"undefined"!=typeof d&&(d!=v&&0<d.length)&&(i.channel=d);"undefined"!=typeof e&&
(e!=v&&0<e.length)&&(i["channel-group"]=e);f&&(i.auth=f);i=B(i);f||delete i.auth;h+=t(i);d=ec(h,kb);d=d.replace(/\+/g,"-");d=d.replace(/\//g,"_");i.signature=d;N({h:g,data:i,j:function(a){r(a,b,c)},i:function(a){m(a,c)},url:[W,"v1","auth","audit","sub-key",z]})},revoke:function(a,b){a.read=w;a.write=w;G.grant(a,b)},set_uuid:function(a){M=a;c()},get_uuid:function(){return M},isArray:function(a){return xa(a)},get_subscibed_channels:function(){return Ba(H,p)},presence_heartbeat:function(a){var b=a.callback||
D(),c=a.error||D(),a=T(),d={uuid:M,auth:L};2<JSON.stringify(fa).length&&(d.state=JSON.stringify(fa));0<$&&320>$&&(d.heartbeat=$);"0"!=a&&(d.callback=a);var e;e=Ba(H,p).join(",");e=encodeURIComponent(e);var f=Ca(X,p).join(",");e||(e=",");f&&(d["channel-group"]=f);ja&&(d.instanceid=aa);N({h:a,data:B(d),url:[W,"v2","presence","sub-key",z,"channel",e,"heartbeat"],j:function(a){r(a,b,c)},i:function(a){m(a,c)}})},stop_timers:function(){clearTimeout(ba);clearTimeout(ca);clearTimeout(pa)},shutdown:function(){G.stop_timers();
ic&&ic()},xdr:N,ready:Fa,db:ia,uuid:va,map:ya,each:F,"each-channel":C,grep:sa,offline:function(){d(1,{message:"Offline. Please check your network settings."})},supplant:ua,now:ka,unique:ha,updater:ra};M||(M=G.uuid());aa||(aa=G.uuid());ia.set(z+"uuid",M);ba=setTimeout(h,J);ca=setTimeout(e,Wb);pa=setTimeout(A,(O-3)*J);b();var f=G,nb;for(nb in f)f.hasOwnProperty(nb)&&(y[nb]=f[nb]);y.css=Pa;y.$=Ja;y.create=Qa;y.bind=Ma;y.head=Na;y.search=La;y.attr=Oa;y.events=sb;y.init=y;y.secure=y;y.crypto_obj=Ha();
Ma("beforeunload",window,function(){if(g)y["each-channel"](function(a){y.LEAVE(a.name,0)});return p});if(a.notest)return y;Ma("offline",window,y.offline);Ma("offline",document,y.offline);return y};ub.init=ub;ub.secure=ub;ub.crypto_obj=Ha();"complete"===document.readyState?setTimeout(Fa,0):Ma("load",window,function(){setTimeout(Fa,0)});var vb=tb||{};PUBNUB=ub({notest:1,publish_key:Oa(vb,"pub-key"),subscribe_key:Oa(vb,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==Oa(vb,"ssl"),origin:Oa(vb,
"origin"),uuid:Oa(vb,"uuid")});window.jQuery&&(window.jQuery.PUBNUB=ub);"undefined"!==typeof module&&(module.exports=PUBNUB)&&Fa();var ab=Ja("pubnubs")||0;if(tb){Pa(tb,{position:"absolute",top:-J});if("opera"in window||Oa(tb,"flash"))tb.innerHTML="<object id=pubnubs data=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=movie value=https://pubnub.a.ssl.fastly.net/pubnub.swf><param name=allowscriptaccess value=always></object>";PUBNUB.rdx=function(a,c){if(!c)return Ua[a].onerror();Ua[a].responseText=
unescape(c);Ua[a].onload()};Ua.id=J}}
var wb=PUBNUB.ws=function(a,c){if(!(this instanceof wb))return new wb(a,c);var b=this,a=b.url=a||"";b.protocol=c||"Sec-WebSocket-Protocol";var d=a.split("/"),d={ssl:"wss:"===d[0],origin:d[2],publish_key:d[3],subscribe_key:d[4],channel:d[5]};b.CONNECTING=0;b.OPEN=1;b.CLOSING=2;b.CLOSED=3;b.CLOSE_NORMAL=1E3;b.CLOSE_GOING_AWAY=1001;b.CLOSE_PROTOCOL_ERROR=1002;b.CLOSE_UNSUPPORTED=1003;b.CLOSE_TOO_LARGE=1004;b.CLOSE_NO_STATUS=1005;b.CLOSE_ABNORMAL=1006;b.onclose=b.onerror=b.onmessage=b.onopen=b.onsend=
D();b.binaryType="";b.extensions="";b.bufferedAmount=0;b.trasnmitting=w;b.buffer=[];b.readyState=b.CONNECTING;if(!a)return b.readyState=b.CLOSED,b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:p}),b;b.S=PUBNUB.init(d);b.S.Ba=d;b.Ba=d;b.S.subscribe({restore:w,channel:d.channel,disconnect:b.onerror,reconnect:b.onopen,error:function(){b.onclose({code:b.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:w})},callback:function(a){b.onmessage({data:a})},connect:function(){b.readyState=b.OPEN;b.onopen()}})};
wb.prototype.send=function(a){var c=this;c.S.publish({channel:c.S.Ba.channel,message:a,callback:function(a){c.onsend({data:a})}})};var xb;
if(!(xb=K)){var yb=Math,zb={},Fb=zb.v={},Gb=D(),Hb=Fb.T={extend:function(a){Gb.prototype=this;var c=new Gb;a&&c.fa(a);c.hasOwnProperty("init")||(c.e=function(){c.Ca.e.apply(this,arguments)});c.e.prototype=c;c.Ca=this;return c},create:function(){var a=this.extend();a.e.apply(a,arguments);return a},e:D(),fa:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},k:function(){return this.e.prototype.extend(this)}},Jb=Fb.G=Hb.extend({e:function(a,
c){a=this.f=a||[];this.a=void 0!=c?c:4*a.length},toString:function(a){return(a||Ib).stringify(this)},concat:function(a){var c=this.f,b=a.f,d=this.a,a=a.a;this.Z();if(d%4)for(var e=0;e<a;e++)c[d+e>>>2]|=(b[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<b.length)for(e=0;e<a;e+=4)c[d+e>>>2]=b[e>>>2];else c.push.apply(c,b);this.a+=a;return this},Z:function(){var a=this.f,c=this.a;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=yb.ceil(c/4)},k:function(){var a=Hb.k.call(this);a.f=this.f.slice(0);return a},
random:function(a){for(var c=[],b=0;b<a;b+=4)c.push(4294967296*yb.random()|0);return new Jb.e(c,a)}}),Kb=zb.da={},Ib=Kb.bb={stringify:function(a){for(var c=a.f,a=a.a,b=[],d=0;d<a;d++){var e=c[d>>>2]>>>24-8*(d%4)&255;b.push((e>>>4).toString(16));b.push((e&15).toString(16))}return b.join("")},parse:function(a){for(var c=a.length,b=[],d=0;d<c;d+=2)b[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new Jb.e(b,c/2)}},Lb=Kb.fb={stringify:function(a){for(var c=a.f,a=a.a,b=[],d=0;d<a;d++)b.push(String.fromCharCode(c[d>>>
2]>>>24-8*(d%4)&255));return b.join("")},parse:function(a){for(var c=a.length,b=[],d=0;d<c;d++)b[d>>>2]|=(a.charCodeAt(d)&255)<<24-8*(d%4);return new Jb.e(b,c)}},Mb=Kb.Ma={stringify:function(a){try{return decodeURIComponent(escape(Lb.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data");}},parse:function(a){return Lb.parse(unescape(encodeURIComponent(a)))}},Nb=Fb.Ha=Hb.extend({reset:function(){this.A=new Jb.e;this.N=0},J:function(a){"string"==typeof a&&(a=Mb.parse(a));this.A.concat(a);this.N+=
a.a},B:function(a){var c=this.A,b=c.f,d=c.a,e=this.u,h=d/(4*e),h=a?yb.ceil(h):yb.max((h|0)-this.ra,0),a=h*e,d=yb.min(4*a,d);if(a){for(var l=0;l<a;l+=e)this.V(b,l);l=b.splice(0,a);c.a-=d}return new Jb.e(l,d)},k:function(){var a=Hb.k.call(this);a.A=this.A.k();return a},ra:0});Fb.la=Nb.extend({g:Hb.extend(),e:function(a){this.g=this.g.extend(a);this.reset()},reset:function(){Nb.reset.call(this);this.M()},update:function(a){this.J(a);this.B();return this},q:function(a){a&&this.J(a);return this.H()},u:16,
L:function(a){return function(c,b){return(new a.e(b)).q(c)}},na:function(a){return function(c,b){return(new Ob.Ja.e(a,b)).q(c)}}});var Ob=zb.D={};xb=zb}for(var K=xb,Pb=Math,Qb=K.v,Rb=Qb.G,Sb=Qb.la,Qb=K.D,Tb=[],Ub=[],Vb=2,Yb=0;64>Yb;){var Zb;a:{Zb=Vb;for(var $b=Pb.sqrt(Zb),ac=2;ac<=$b;ac++)if(!(Zb%ac)){Zb=w;break a}Zb=p}Zb&&(8>Yb&&(Tb[Yb]=4294967296*(Pb.pow(Vb,0.5)-(Pb.pow(Vb,0.5)|0))|0),Ub[Yb]=4294967296*(Pb.pow(Vb,1/3)-(Pb.pow(Vb,1/3)|0))|0,Yb++);Vb++}
var bc=[],Qb=Qb.La=Sb.extend({M:function(){this.s=new Rb.e(Tb.slice(0))},V:function(a,c){for(var b=this.s.f,d=b[0],e=b[1],h=b[2],l=b[3],m=b[4],r=b[5],C=b[6],x=b[7],s=0;64>s;s++){if(16>s)bc[s]=a[c+s]|0;else{var A=bc[s-15],q=bc[s-2];bc[s]=((A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3)+bc[s-7]+((q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10)+bc[s-16]}A=x+((m<<26|m>>>6)^(m<<21|m>>>11)^(m<<7|m>>>25))+(m&r^~m&C)+Ub[s]+bc[s];q=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&h^e&h);x=C;C=r;r=m;m=l+A|0;l=h;h=e;e=d;d=A+q|
0}b[0]=b[0]+d|0;b[1]=b[1]+e|0;b[2]=b[2]+h|0;b[3]=b[3]+l|0;b[4]=b[4]+m|0;b[5]=b[5]+r|0;b[6]=b[6]+C|0;b[7]=b[7]+x|0},H:function(){var a=this.A,c=a.f,b=8*this.N,d=8*a.a;c[d>>>5]|=128<<24-d%32;c[(d+64>>>9<<4)+14]=Pb.floor(b/4294967296);c[(d+64>>>9<<4)+15]=b;a.a=4*c.length;this.B();return this.s},k:function(){var a=Sb.k.call(this);a.s=this.s.k();return a}});K.La=Sb.L(Qb);K.eb=Sb.na(Qb);var cc=K.da.Ma;
K.D.Ja=K.v.T.extend({e:function(a,c){a=this.W=new a.e;"string"==typeof c&&(c=cc.parse(c));var b=a.u,d=4*b;c.a>d&&(c=a.q(c));c.Z();for(var e=this.Ua=c.k(),h=this.Oa=c.k(),l=e.f,m=h.f,r=0;r<b;r++)l[r]^=1549556828,m[r]^=909522486;e.a=h.a=d;this.reset()},reset:function(){var a=this.W;a.reset();a.update(this.Oa)},update:function(a){this.W.update(a);return this},q:function(a){var c=this.W,a=c.q(a);c.reset();return c.q(this.Ua.k().concat(a))}});var jc=K.v.G;
K.da.Ea={stringify:function(a){var c=a.f,b=a.a,d=this.qa;a.Z();for(var a=[],e=0;e<b;e+=3)for(var h=(c[e>>>2]>>>24-8*(e%4)&255)<<16|(c[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|c[e+2>>>2]>>>24-8*((e+2)%4)&255,l=0;4>l&&e+0.75*l<b;l++)a.push(d.charAt(h>>>6*(3-l)&63));if(c=d.charAt(64))for(;a.length%4;)a.push(c);return a.join("")},parse:function(a){var c=a.length,b=this.qa,d=b.charAt(64);d&&(d=a.indexOf(d),-1!=d&&(c=d));for(var d=[],e=0,h=0;h<c;h++)h%4&&(d[e>>>2]|=(b.indexOf(a.charAt(h-1))<<2*(h%4)|b.indexOf(a.charAt(h))>>>
6-2*(h%4))<<24-8*(e%4),e++);return jc.create(d,e)},qa:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};var kc=Math;function P(a,c,b,d,e,h,l){a=a+(c&b|~c&d)+e+l;return(a<<h|a>>>32-h)+c}function Q(a,c,b,d,e,h,l){a=a+(c&d|b&~d)+e+l;return(a<<h|a>>>32-h)+c}function R(a,c,b,d,e,h,l){a=a+(c^b^d)+e+l;return(a<<h|a>>>32-h)+c}function S(a,c,b,d,e,h,l){a=a+(b^(c|~d))+e+l;return(a<<h|a>>>32-h)+c}
for(var lc=K.v,mc=lc.G,nc=lc.la,lc=K.D,U=[],oc=0;64>oc;oc++)U[oc]=4294967296*kc.abs(kc.sin(oc+1))|0;
lc=lc.ma=nc.extend({M:function(){this.s=new mc.e([1732584193,4023233417,2562383102,271733878])},V:function(a,c){for(var b=0;16>b;b++){var d=c+b,e=a[d];a[d]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var b=this.s.f,d=a[c+0],e=a[c+1],h=a[c+2],l=a[c+3],m=a[c+4],r=a[c+5],C=a[c+6],x=a[c+7],s=a[c+8],A=a[c+9],q=a[c+10],E=a[c+11],I=a[c+12],t=a[c+13],B=a[c+14],y=a[c+15],f=b[0],g=b[1],i=b[2],j=b[3],f=P(f,g,i,j,d,7,U[0]),j=P(j,f,g,i,e,12,U[1]),i=P(i,j,f,g,h,17,U[2]),g=P(g,i,j,f,l,22,U[3]),f=P(f,g,i,j,m,
7,U[4]),j=P(j,f,g,i,r,12,U[5]),i=P(i,j,f,g,C,17,U[6]),g=P(g,i,j,f,x,22,U[7]),f=P(f,g,i,j,s,7,U[8]),j=P(j,f,g,i,A,12,U[9]),i=P(i,j,f,g,q,17,U[10]),g=P(g,i,j,f,E,22,U[11]),f=P(f,g,i,j,I,7,U[12]),j=P(j,f,g,i,t,12,U[13]),i=P(i,j,f,g,B,17,U[14]),g=P(g,i,j,f,y,22,U[15]),f=Q(f,g,i,j,e,5,U[16]),j=Q(j,f,g,i,C,9,U[17]),i=Q(i,j,f,g,E,14,U[18]),g=Q(g,i,j,f,d,20,U[19]),f=Q(f,g,i,j,r,5,U[20]),j=Q(j,f,g,i,q,9,U[21]),i=Q(i,j,f,g,y,14,U[22]),g=Q(g,i,j,f,m,20,U[23]),f=Q(f,g,i,j,A,5,U[24]),j=Q(j,f,g,i,B,9,U[25]),i=
Q(i,j,f,g,l,14,U[26]),g=Q(g,i,j,f,s,20,U[27]),f=Q(f,g,i,j,t,5,U[28]),j=Q(j,f,g,i,h,9,U[29]),i=Q(i,j,f,g,x,14,U[30]),g=Q(g,i,j,f,I,20,U[31]),f=R(f,g,i,j,r,4,U[32]),j=R(j,f,g,i,s,11,U[33]),i=R(i,j,f,g,E,16,U[34]),g=R(g,i,j,f,B,23,U[35]),f=R(f,g,i,j,e,4,U[36]),j=R(j,f,g,i,m,11,U[37]),i=R(i,j,f,g,x,16,U[38]),g=R(g,i,j,f,q,23,U[39]),f=R(f,g,i,j,t,4,U[40]),j=R(j,f,g,i,d,11,U[41]),i=R(i,j,f,g,l,16,U[42]),g=R(g,i,j,f,C,23,U[43]),f=R(f,g,i,j,A,4,U[44]),j=R(j,f,g,i,I,11,U[45]),i=R(i,j,f,g,y,16,U[46]),g=R(g,
i,j,f,h,23,U[47]),f=S(f,g,i,j,d,6,U[48]),j=S(j,f,g,i,x,10,U[49]),i=S(i,j,f,g,B,15,U[50]),g=S(g,i,j,f,r,21,U[51]),f=S(f,g,i,j,I,6,U[52]),j=S(j,f,g,i,l,10,U[53]),i=S(i,j,f,g,q,15,U[54]),g=S(g,i,j,f,e,21,U[55]),f=S(f,g,i,j,s,6,U[56]),j=S(j,f,g,i,y,10,U[57]),i=S(i,j,f,g,C,15,U[58]),g=S(g,i,j,f,t,21,U[59]),f=S(f,g,i,j,m,6,U[60]),j=S(j,f,g,i,E,10,U[61]),i=S(i,j,f,g,h,15,U[62]),g=S(g,i,j,f,A,21,U[63]);b[0]=b[0]+f|0;b[1]=b[1]+g|0;b[2]=b[2]+i|0;b[3]=b[3]+j|0},H:function(){var a=this.A,c=a.f,b=8*this.N,d=8*
a.a;c[d>>>5]|=128<<24-d%32;var e=kc.floor(b/4294967296);c[(d+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;c[(d+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;a.a=4*(c.length+1);this.B();a=this.s;c=a.f;for(b=0;4>b;b++)d=c[b],c[b]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360;return a},k:function(){var a=nc.k.call(this);a.s=this.s.k();return a}});K.ma=nc.L(lc);K.cb=nc.na(lc);
var pc=K.v,qc=pc.T,rc=pc.G,pc=K.D,sc=pc.ka=qc.extend({g:qc.extend({F:4,Wa:pc.ma,Xa:1}),e:function(a){this.g=this.g.extend(a)},va:function(a,c){for(var b=this.g,d=b.Wa.create(),e=rc.create(),h=e.f,l=b.F,b=b.Xa;h.length<l;){m&&d.update(m);var m=d.update(a).q(c);d.reset();for(var r=1;r<b;r++)m=d.q(m),d.reset();e.concat(m)}e.a=4*l;return e}});K.ka=function(a,c,b){return sc.create(b).va(a,c)};
if(!K.v.Ia){var tc=K,uc=tc.v,vc=uc.T,wc=uc.G,xc=uc.Ha,yc=tc.da.Ea,zc=tc.D.ka,Cc=uc.Ia=xc.extend({g:vc.extend(),ba:function(a,c){return this.create(this.U,a,c)},aa:function(a,c){return this.create(this.Na,a,c)},e:function(a,c,b){this.g=this.g.extend(b);this.ua=a;this.Qa=c;this.reset()},reset:function(){xc.reset.call(this);this.M()},mb:function(a){this.J(a);return this.B()},q:function(a){a&&this.J(a);return this.H()},F:4,ya:4,U:1,Na:2,L:function(a){return{P:function(c,b,d){return("string"==typeof b?
Ac:Bc).P(a,c,b,d)},O:function(c,b,d){return("string"==typeof b?Ac:Bc).O(a,c,b,d)}}}});uc.jb=Cc.extend({H:function(){return this.B(p)},u:1});var Dc=tc.mode={},Ec=function(a,c,b){var d=this.pa;d?this.pa=void 0:d=this.ta;for(var e=0;e<b;e++)a[c+e]^=d[e]},Fc=(uc.Ga=vc.extend({ba:function(a,c){return this.ja.create(a,c)},aa:function(a,c){return this.ia.create(a,c)},e:function(a,c){this.K=a;this.pa=c}})).extend();Fc.ja=Fc.extend({R:function(a,c){var b=this.K,d=b.u;Ec.call(this,a,c,d);b.xa(a,c);this.ta=
a.slice(c,c+d)}});Fc.ia=Fc.extend({R:function(a,c){var b=this.K,d=b.u,e=a.slice(c,c+d);b.wa(a,c);Ec.call(this,a,c,d);this.ta=e}});Dc=Dc.Za=Fc;Fc=(tc.za={}).hb={za:function(a,c){for(var b=4*c,b=b-a.a%b,d=b<<24|b<<16|b<<8|b,e=[],h=0;h<b;h+=4)e.push(d);b=wc.create(e,b);a.concat(b)},Ya:function(a){a.a-=a.f[a.a-1>>>2]&255}};uc.Fa=Cc.extend({g:Cc.g.extend({mode:Dc,padding:Fc}),reset:function(){Cc.reset.call(this);var a=this.g,c=a.C,a=a.mode;if(this.ua==this.U)var b=a.ba;else b=a.aa,this.ra=1;this.Sa=b.call(a,
this,c&&c.f)},V:function(a,c){this.Sa.R(a,c)},H:function(){var a=this.g.padding;if(this.ua==this.U){a.za(this.A,this.u);var c=this.B(p)}else c=this.B(p),a.Ya(c);return c},u:4});var Gc=uc.$a=vc.extend({e:function(a){this.fa(a)},toString:function(a){return(a||this.Va).stringify(this)}}),Dc=(tc.Q={}).Ka={stringify:function(a){var c=a.Y,a=a.ha;return(a?wc.create([1398893684,1701076831]).concat(a).concat(c):c).toString(yc)},parse:function(a){var a=yc.parse(a),c=a.f;if(1398893684==c[0]&&1701076831==c[1]){var b=
wc.create(c.slice(2,4));c.splice(0,4);a.a-=16}return Gc.create({Y:a,ha:b})}},Bc=uc.ib=vc.extend({g:vc.extend({Q:Dc}),P:function(a,c,b,d){var d=this.g.extend(d),e=a.ba(b,d),c=e.q(c),e=e.g;return Gc.create({Y:c,key:b,C:e.C,kb:a,mode:e.mode,padding:e.padding,u:a.u,Va:d.Q})},O:function(a,c,b,d){d=this.g.extend(d);c=this.sa(c,d.Q);return a.aa(b,d).q(c.Y)},sa:function(a,c){return"string"==typeof a?c.parse(a,this):a}}),tc=(tc.ea={}).Ka={execute:function(a,c,b,d){d||(d=wc.random(8));a=zc.create({F:c+b}).va(a,
d);b=wc.create(a.f.slice(c),4*b);a.a=4*c;return Gc.create({key:a,C:b,ha:d})}},Ac=uc.gb=Bc.extend({g:Bc.g.extend({ea:tc}),P:function(a,c,b,d){d=this.g.extend(d);b=d.ea.execute(b,a.F,a.ya);d.C=b.C;a=Bc.P.call(this,a,c,b.key,d);a.fa(b);return a},O:function(a,c,b,d){d=this.g.extend(d);c=this.sa(c,d.Q);b=d.ea.execute(b,a.F,a.ya,c.ha);d.C=b.C;return Bc.O.call(this,a,c,b.key,d)}})}
for(var Hc=K.v.Fa,Ic=K.D,V=[],Jc=[],Kc=[],Lc=[],Nc=[],Oc=[],Uc=[],Vc=[],Wc=[],Xc=[],Yc=[],Zc=0;256>Zc;Zc++)Yc[Zc]=128>Zc?Zc<<1:Zc<<1^283;
for(var $c=0,ad=0,Zc=0;256>Zc;Zc++){var bd=ad^ad<<1^ad<<2^ad<<3^ad<<4,bd=bd>>>8^bd&255^99;V[$c]=bd;Jc[bd]=$c;var cd=Yc[$c],dd=Yc[cd],ed=Yc[dd],Y=257*Yc[bd]^16843008*bd;Kc[$c]=Y<<24|Y>>>8;Lc[$c]=Y<<16|Y>>>16;Nc[$c]=Y<<8|Y>>>24;Oc[$c]=Y;Y=16843009*ed^65537*dd^257*cd^16843008*$c;Uc[bd]=Y<<24|Y>>>8;Vc[bd]=Y<<16|Y>>>16;Wc[bd]=Y<<8|Y>>>24;Xc[bd]=Y;$c?($c=cd^Yc[Yc[Yc[ed^cd]]],ad^=Yc[Yc[ad]]):$c=ad=1}
var fd=[0,1,2,4,8,16,32,64,128,27,54],Ic=Ic.Da=Hc.extend({M:function(){for(var a=this.Qa,c=a.f,b=a.a/4,a=4*((this.Ta=b+6)+1),d=this.Ra=[],e=0;e<a;e++)if(e<b)d[e]=c[e];else{var h=d[e-1];e%b?6<b&&4==e%b&&(h=V[h>>>24]<<24|V[h>>>16&255]<<16|V[h>>>8&255]<<8|V[h&255]):(h=h<<8|h>>>24,h=V[h>>>24]<<24|V[h>>>16&255]<<16|V[h>>>8&255]<<8|V[h&255],h^=fd[e/b|0]<<24);d[e]=d[e-b]^h}c=this.Pa=[];for(b=0;b<a;b++)e=a-b,h=b%4?d[e]:d[e-4],c[b]=4>b||4>=e?h:Uc[V[h>>>24]]^Vc[V[h>>>16&255]]^Wc[V[h>>>8&255]]^Xc[V[h&255]]},
xa:function(a,c){this.oa(a,c,this.Ra,Kc,Lc,Nc,Oc,V)},wa:function(a,c){var b=a[c+1];a[c+1]=a[c+3];a[c+3]=b;this.oa(a,c,this.Pa,Uc,Vc,Wc,Xc,Jc);b=a[c+1];a[c+1]=a[c+3];a[c+3]=b},oa:function(a,c,b,d,e,h,l,m){for(var r=this.Ta,C=a[c]^b[0],x=a[c+1]^b[1],s=a[c+2]^b[2],A=a[c+3]^b[3],q=4,E=1;E<r;E++)var I=d[C>>>24]^e[x>>>16&255]^h[s>>>8&255]^l[A&255]^b[q++],t=d[x>>>24]^e[s>>>16&255]^h[A>>>8&255]^l[C&255]^b[q++],B=d[s>>>24]^e[A>>>16&255]^h[C>>>8&255]^l[x&255]^b[q++],A=d[A>>>24]^e[C>>>16&255]^h[x>>>8&255]^l[s&
255]^b[q++],C=I,x=t,s=B;I=(m[C>>>24]<<24|m[x>>>16&255]<<16|m[s>>>8&255]<<8|m[A&255])^b[q++];t=(m[x>>>24]<<24|m[s>>>16&255]<<16|m[A>>>8&255]<<8|m[C&255])^b[q++];B=(m[s>>>24]<<24|m[A>>>16&255]<<16|m[C>>>8&255]<<8|m[x&255])^b[q++];A=(m[A>>>24]<<24|m[C>>>16&255]<<16|m[x>>>8&255]<<8|m[s&255])^b[q++];a[c]=I;a[c+1]=t;a[c+2]=B;a[c+3]=A},F:8});K.Da=Hc.L(Ic);var gd=K.mode,hd=K.v.Ga.extend();hd.ja=hd.extend({R:function(a,c){this.K.xa(a,c)}});hd.ia=hd.extend({R:function(a,c){this.K.wa(a,c)}});gd.ab=hd;
})();
(function(){function n(c){b.each(d,function(a){if(a in g&&c in g[a]){var e=g[a][c];e.connected&&(e.connected=!1,e.socket.user_count--,b.events.fire(a+"leave",e))}})}function l(c,a,e,h,d){var k=j(a);b.publish({channel:k.channel,message:{name:c,ns:a,data:e,uuid:m,geo:k.location||[0,0]},callback:function(b){if(b[0])return(d||function(){})(b);var i=2*(h||500);setTimeout(function(){l(c,a,e,i,d)},5500<i?5500:i)}})}function p(c){c=c||function(){};navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){socket.location=
[b.coords.latitude,b.coords.longitude];c(socket.location)})||c([0,0])}function j(c){var a=d[c]||(d[c]={namespace:c,connected:!1,users:g[c]={},user_count:1,get_user_list:function(){return d[c].users},get_user_count:function(){return d[c].user_count},emit:function(b,a,d){l(b,c,a,0,d)},send:function(b,a){l("message",c,b,0,a)},on:function(a,d){"string"===typeof a?b.events.bind(c+a,d):"object"===typeof a&&b.each(a,function(a){b.events.bind(c+a,d)})},disconnect:function(){b.unsubscribe({channel:a.channel})},
history:function(a,d){var g=j(c);a.channel=g.channel;b.history(a,function(a){var b=[];PUBNUB.each(a[0]||[],function(a){"message"==a.name&&a.ns==c&&b.push(a)});a[0]=b;d(a)})},here_now:function(a){var d=j(c);b.here_now({channel:d.channel},a)}});return a}var b=PUBNUB,q=0,m=PUBNUB.db.get("uuid")||b.uuid(function(b){PUBNUB.db.set("uuid",m=b)}),d={},g={},r=window.io={connected:{},connect:function(c,a){function e(){var a=b.map(d,function(a){return a});l("ping",i,{nss:a,cuser:s})}var h=(c+"////").split("/"),
a=a||{},s=a.user||{},k="presence"in a?a.presence:!0,t=h[2],i=(h[3]||"standard")+"-"+a.channel,h=a.channel,f=j(i);f.channel=h;f.password="GibberishAES"in window&&a.password;if(h in r.connected)return f;a.geo&&setInterval(p,15E3)&&p();a.uuid=m;a.origin=t;b=r.connected[h]=q?b:PUBNUB[f.password?"secure":"init"](a);q=1;f.disconnected=0;b.subscribe({channel:f.channel,disconnect:function(){f.disconnected||(f.disconnected=1,b.each(d,function(a){b.events.fire(a+"disconnect",{})}))},reconnect:function(){b.disconnected=
0},connect:function(){f.disconnected=0;b.each(d,function(a){var c=j(a);c.connected||(c.connected=!0,b.events.fire(a+"connect",{}))});e()},presence:k&&function(a){"leave"===a.action&&n(a.uuid);"timeout"===a.action&&n(a.uuid);"join"===a.action&&e()},callback:function(a){f.disconnected&&b.each(d,function(a){b.events.fire(a+"reconnect",{})});f.disconnected=0;var c=a.data;a.ns in d&&c&&b.events.fire(a.ns+a.name,c);a.uuid&&a.uuid!==m&&"ping"===a.name&&b.each(c.nss,function(d){g[d]=g[d]||{};var e=g[d][a.uuid]=
g[d][a.uuid]||{geo:a.geo||[0,0],uuid:a.uuid,last:+new Date,socket:f,namespace:d,connected:!1,slot:f.user_count++};e.last=+new Date;e.data=c.cuser;e.connected||(b.events.fire(d+"join",e),e.connected=!0)})}});k&&(setInterval(e,3E4),e());return f}}})();
