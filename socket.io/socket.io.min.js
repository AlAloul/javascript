// Version: 3.8.0
(function(){
window.PUBNUB||function(){function e(){return"x"+ ++J+ +new Date}function t(){return+new Date}function r(n,e){var t=n.join(F),r=[];return e?(l(e,function(n,e){var t="object"==typeof e?JSON.stringify(e):e;"undefined"!=typeof e&&null!=e&&h(t).length>0&&r.push(n+"="+h(t))}),t+="?"+r.join(W)):t}function i(n,e){var r,i=0,o=function(){i+e>t()?(clearTimeout(r),r=setTimeout(o,e)):(i=t(),n())};return o}function o(n,e){var t=[];return l(n||[],function(n){e(n)&&t.push(n)}),t}function c(n,e){return n.replace(Q,function(n,t){return e[t]||n})}function a(n,e){return setTimeout(n,e)}function u(n){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=16*Math.random()|0,t="x"==n?e:3&e|8;return t.toString(16)});return n&&n(e),e}function s(n){return!!n&&"string"!=typeof n&&(Array.isArray&&Array.isArray(n)||"number"==typeof n.length)}function l(n,e){if(n&&e)if(s(n))for(var t=0,r=n.length;r>t;)e.call(n[t],n[t],t++);else for(var t in n)n.hasOwnProperty&&n.hasOwnProperty(t)&&e.call(n[t],t,n[t])}function f(n,e){var t=[];return l(n||[],function(n,r){t.push(e(n,r))}),t}function p(n){return encodeURIComponent(n).replace(/[!'()*~]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}function h(n){return encodeURIComponent(n)}function d(n,e){var t=[];return l(n,function(n,r){e?n.search("-pnpres")<0&&r.subscribed&&t.push(n):r.subscribed&&t.push(n)}),t.sort()}function g(n,e){var t=[];return l(n,function(n,r){e?n.search("-pnpres")<0&&r.subscribed&&t.push(n):r.subscribed&&t.push(n)}),t.sort()}function y(){a(function(){j||(j=1,l(T,function(n){n()}))},G)}function v(n){return msg=n||{apns:{}},msg.getPubnubMessage=function(){var n={};if(Object.keys(msg.apns).length){n.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var e in msg.apns)n.pn_apns[e]=msg.apns[e];var t=["badge","alert"];for(var e in t)delete n.pn_apns[t[e]]}msg.gcm&&(n.pn_gcm={data:msg.gcm});for(var e in msg)n[e]=msg[e];var r=["apns","gcm","publish","channel","callback","error"];for(var e in r)delete n[r[e]];return n},msg.publish=function(){var n=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:n,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function b(v){function b(n){return n||(n={}),l(Ln,function(e,t){e in n||(n[e]=t)}),n}function _(n){var e=[];return l(n,function(n,t){e.push(n)}),e}function m(n){return _(n).sort()}function S(n){var e="",t=m(n);for(var r in t){var i=t[r];e+=i+"="+p(n[i]),r!=t.length-1&&(e+="&")}return e}function x(n,e,t){var r=!1;if("undefined"==typeof n)return e;if("number"==typeof n)r=n>X||0==n?!1:!0;else{if("boolean"==typeof n)return n?q:0;r=!0}return r?(t&&t("Presence Heartbeat value invalid. Valid range ( x > "+X+" or x = 0). Current Value : "+(e||X)),e||X):n}function w(n,e){return Fn.encrypt(n,e||Tn)||n}function C(n,e){return Fn.decrypt(n,e||Tn)||Fn.decrypt(n,Tn)||n}function B(){return clearTimeout(Bn),!Mn||Mn>=500||1>Mn||!d(xn,!0).length&&!g(wn,!0).length?void(En=!1):(En=!0,void Wn.presence_heartbeat({callback:function(n){Bn=a(B,Mn*G)},error:function(n){Dn&&Dn("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(n)),Bn=a(B,Mn*G)}}))}function O(){!En&&B()}function M(n){if(Pn){if(!dn.length)return}else{if(n&&(dn.sending=0),dn.sending||!dn.length)return;dn.sending=1}Nn(dn.shift())}function E(n){var e=0;return l(g(wn),function(t){var r=wn[t];r&&(e++,(n||function(){})(r))}),e}function P(n){var e=0;return l(d(xn),function(t){var r=xn[t];r&&(e++,(n||function(){})(r))}),e}function A(n,e,t){if("object"==typeof n){if(n.error){var r={};return n.message&&(r.message=n.message),n.payload&&(r.payload=n.payload),void(t&&t(r))}if(n.payload)return void(n.next_page?e&&e(n.payload,n.next_page):e&&e(n.payload))}e&&e(n)}function N(n,e){if("object"==typeof n&&n.error){var t={};return n.message&&(t.message=n.message),n.payload&&(t.payload=n.payload),void(e&&e(t))}e&&e(n)}function L(n,e,t,r){var e=n.callback||e,i=n.error||Dn,o=Jn();r=r||{},r.auth||(r.auth=n.auth_key||cn);var c=[fn,"v1","channel-registration","sub-key",on];c.push.apply(c,t),o&&(r.callback=o),Nn({callback:o,data:b(r),success:function(n){A(n,e,i)},fail:function(n){N(n,i)},url:c})}function D(){zn()||J(1,{error:"Offline. Please check your network settings. "}),W&&clearTimeout(W),W=a(D,G)}function z(){en&&Wn.time(function(n){F(function(){},n),n||J(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),Q&&clearTimeout(Q),Q=a(z,nn)})}function J(n,e){_n&&_n(n,e),_n=null,clearTimeout(W),clearTimeout(Q)}function H(n){var e=t()-yn;return e-n/1e4}function F(n,e){function r(e){if(e){var r=e/1e4,o=(t()-i)/2;yn=t()-(r+o),n&&n(yn)}}var i=t();e&&r(e)||Wn.time(r)}var W,Q,Y=+v.windowing||R,Z=(+v.timeout||K)*G,nn=(+v.keepalive||I)*G,en=v.timecheck||0,tn=v.noleave||0,rn=v.publish_key,on=v.subscribe_key,cn=v.auth_key||"",an=v.secret_key||"",un=v.hmac_SHA256,sn=v.ssl?"s":"",ln="http"+sn+"://"+(v.origin||"pubsub.pubnub.com"),fn=$(ln),pn=$(ln),hn=function(){},dn=[],gn=!0,yn=0,vn=0,bn=0,_n=0,mn=v.restore||0,kn=0,Sn=!1,xn={},wn={},Cn={},Bn=null,On=x(v.heartbeat||v.pnexpires||0,v.error),Mn=v.heartbeat_interval||On/2-1,En=!1,Pn=v.no_wait_for_pending,An=v["compatible_3.5"]||!1,Nn=v.xdr,Ln=v.params||{},Dn=v.error||function(){},zn=v._is_online||function(){return 1},Jn=v.jsonp_cb||function(){return 0},jn=v.db||{get:function(){},set:function(){}},Tn=v.cipher_key,Un=v.uuid||!v.unique_uuid&&jn&&jn.get(on+"uuid")||"",Rn=v.instance_id||!1,Hn="",Kn=v.shutdown,In="undefined"!=typeof v.use_send_beacon?v.use_send_beacon:!0,Gn=In?v.sendBeacon:null;2===On&&(Mn=1);var Fn=v.crypto_obj||{encrypt:function(n,e){return n},decrypt:function(n,e){return n}},Wn={LEAVE:function(n,e,t,i,o){var c,a,u={uuid:Un,auth:t||cn},s=$(ln),i=i||function(){},l=o||function(){},f=Jn();if(n.indexOf(U)>0)return!0;if(An){if(!sn)return!1;if("0"==f)return!1}return tn?!1:("0"!=f&&(u.callback=f),Rn&&(u.instanceid=Hn),c=[s,"v2","presence","sub_key",on,"channel",h(n),"leave"],a=b(u),Gn&&(url_string=r(c,a),Gn(url_string))?(i&&i({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Nn({blocking:e||sn,callback:f,data:a,success:function(n){A(n,i,l)},fail:function(n){N(n,l)},url:c}),!0))},LEAVE_GROUP:function(n,e,t,i,o){var c,a,u={uuid:Un,auth:t||cn},s=$(ln),i=i||function(){},l=o||function(){},f=Jn();if(n.indexOf(U)>0)return!0;if(An){if(!sn)return!1;if("0"==f)return!1}return tn?!1:("0"!=f&&(u.callback=f),n&&n.length>0&&(u["channel-group"]=n),Rn&&(u.instanceid=Hn),c=[s,"v2","presence","sub_key",on,"channel",h(","),"leave"],a=b(u),Gn&&(url_string=r(c,a),Gn(url_string))?(i&&i({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Nn({blocking:e||sn,callback:f,data:a,success:function(n){A(n,i,l)},fail:function(n){N(n,l)},url:c}),!0))},set_resumed:function(n){Sn=n},get_cipher_key:function(){return Tn},set_cipher_key:function(n){Tn=n},raw_encrypt:function(n,e){return w(n,e)},raw_decrypt:function(n,e){return C(n,e)},get_heartbeat:function(){return On},set_heartbeat:function(n,e){On=x(n,On,Dn),Mn=e||On/2-1,2==On&&(Mn=1),hn(),B()},get_heartbeat_interval:function(){return Mn},set_heartbeat_interval:function(n){Mn=n,B()},get_version:function(){return V},getGcmMessageObject:function(n){return{data:n}},getApnsMessageObject:function(n){var e={aps:{badge:1,alert:""}};for(k in n)k[e]=n[k];return e},newPnMessage:function(){var e={};gcm&&(e.pn_gcm=gcm),apns&&(e.pn_apns=apns);for(k in n)e[k]=n[k];return e},_add_param:function(n,e){Ln[n]=e},channel_group:function(n,e){var t,r,i=n.channel_group,e=e||n.callback,o=n.channels||n.channel,c=n.cloak,a=[],u={},l=n.mode||"add";if(i){var f=i.split(":");f.length>1?(t="*"===f[0]?null:f[0],r=f[1]):r=f[0]}t&&a.push("namespace")&&a.push(h(t)),a.push("channel-group"),r&&"*"!==r&&a.push(r),o?(s(o)&&(o=o.join(",")),u[l]=o,u.cloak=gn?"true":"false"):"remove"===l&&a.push("remove"),"undefined"!=typeof c&&(u.cloak=c?"true":"false"),L(n,e,a,u)},channel_group_list_groups:function(n,e){var t;t=n.namespace||n.ns||n.channel_group||null,t&&(n.channel_group=t+":*"),Wn.channel_group(n,e)},channel_group_list_channels:function(n,e){return n.channel_group?void Wn.channel_group(n,e):Dn("Missing Channel Group")},channel_group_remove_channel:function(n,e){return n.channel_group?n.channel||n.channels?(n.mode="remove",void Wn.channel_group(n,e)):Dn("Missing Channel"):Dn("Missing Channel Group")},channel_group_remove_group:function(n,e){return n.channel_group?n.channel?Dn("Use channel_group_remove_channel if you want to remove a channel from a group."):(n.mode="remove",void Wn.channel_group(n,e)):Dn("Missing Channel Group")},channel_group_add_channel:function(n,e){return n.channel_group?n.channel||n.channels?void Wn.channel_group(n,e):Dn("Missing Channel"):Dn("Missing Channel Group")},channel_group_cloak:function(n,e){return"undefined"==typeof n.cloak?void e(gn):(gn=n.cloak,void Wn.channel_group(n,e))},channel_group_list_namespaces:function(n,e){var t=["namespace"];L(n,e,t)},channel_group_remove_namespace:function(n,e){var t=["namespace",n.namespace,"remove"];L(n,e,t)},history:function(n,e){var e=n.callback||e,t=n.count||n.limit||100,r=n.reverse||"false",i=n.error||function(){},o=n.auth_key||cn,c=n.cipher_key,a=n.channel,u=n.channel_group,s=n.start,l=n.end,f=n.include_token,p=n.string_message_token||!1,d={},g=Jn();return a||u?e?on?(d.stringtoken="true",d.count=t,d.reverse=r,d.auth=o,u&&(d["channel-group"]=u,a||(a=",")),g&&(d.callback=g),s&&(d.start=s),l&&(d.end=l),f&&(d.include_token="true"),p&&(d.string_message_token="true"),void Nn({callback:g,data:b(d),success:function(n){if("object"==typeof n&&n.error)return void i({message:n.message,payload:n.payload});for(var t=n[0],r=[],o=0;o<t.length;o++)if(f){var a=C(t[o].message,c),u=t[o].timetoken;try{r.push({message:JSON.parse(a),timetoken:u})}catch(s){r.push({message:a,timetoken:u})}}else{var a=C(t[o],c);try{r.push(JSON.parse(a))}catch(s){r.push(a)}}e([r,n[1],n[2]])},fail:function(n){N(n,i)},url:[fn,"v2","history","sub-key",on,"channel",h(a)]})):Dn("Missing Subscribe Key"):Dn("Missing Callback"):Dn("Missing Channel")},replay:function(n,e){var t,e=e||n.callback||function(){},r=n.auth_key||cn,i=n.source,o=n.destination,c=n.stop,a=n.start,u=n.end,s=n.reverse,l=n.limit,f=Jn(),p={};return i?o?rn?on?("0"!=f&&(p.callback=f),c&&(p.stop="all"),s&&(p.reverse="true"),a&&(p.start=a),u&&(p.end=u),l&&(p.count=l),p.auth=r,t=[fn,"v1","replay",rn,on,i,o],void Nn({callback:f,success:function(n){A(n,e,err)},fail:function(){e([0,"Disconnected"])},url:t,data:b(p)})):Dn("Missing Subscribe Key"):Dn("Missing Publish Key"):Dn("Missing Destination Channel"):Dn("Missing Source Channel")},auth:function(n){cn=n,hn()},time:function(n){var e=Jn(),t={uuid:Un,auth:cn};Rn&&(t.instanceid=Hn),Nn({callback:e,data:b(t),url:[fn,"time",e],success:function(e){n(e[0])},fail:function(){n(0)}})},publish:function(n,e){var t=n.message;if(!t)return Dn("Missing Message");var r,i,e=e||n.callback||t.callback||n.success||function(){},o=n.channel||t.channel,c=n.auth_key||cn,a=n.cipher_key,u=n.error||t.error||function(){},s=n.post||!1,l="store_in_history"in n?n.store_in_history:!0,f=Jn(),p="push";return n.prepend&&(p="unshift"),o?rn?on?(t.getPubnubMessage&&(t=t.getPubnubMessage()),t=JSON.stringify(w(t,a)),i=[fn,"publish",rn,on,0,h(o),f,h(t)],r={uuid:Un,auth:c},l||(r.store="0"),Rn&&(r.instanceid=Hn),dn[p]({callback:f,url:i,data:b(r),fail:function(n){N(n,u),M(1)},success:function(n){A(n,e,u),M(1)},mode:s?"POST":"GET"}),void M()):Dn("Missing Subscribe Key"):Dn("Missing Publish Key"):Dn("Missing Channel")},unsubscribe:function(n,e){var t=n.channel,r=n.channel_group,i=n.auth_key||cn,e=e||n.callback||function(){},o=n.error||function(){};if(kn=0,mn=1,!t&&!r)return Dn("Missing Channel or Channel Group");if(!on)return Dn("Missing Subscribe Key");if(t){var c=s(t)?t:(""+t).split(","),a=[],u=[];if(l(c,function(n){xn[n]&&a.push(n)}),0==a.length)return void e({action:"leave"});l(a,function(n){u.push(n+U)}),l(a.concat(u),function(n){n in xn&&(xn[n]=0),n in Cn&&delete Cn[n]});var f=!0;j&&(f=Wn.LEAVE(a.join(","),0,i,e,o)),f||e({action:"leave"})}if(r){var p=s(r)?r:(""+r).split(","),h=[],d=[];if(l(p,function(n){wn[n]&&h.push(n)}),0==h.length)return void e({action:"leave"});l(h,function(n){d.push(n+U)}),l(h.concat(d),function(n){n in wn&&(wn[n]=0),n in Cn&&delete Cn[n]});var f=!0;j&&(f=Wn.LEAVE_GROUP(h.join(","),0,i,e,o)),f||e({action:"leave"})}hn()},subscribe:function(n,e){function r(n){n?a(hn,w):(fn=$(ln,1),pn=$(ln,1),a(function(){Wn.time(r)},G)),P(function(e){return n&&e.disconnected?(e.disconnected=0,e.reconnect(e.name)):void(n||e.disconnected||(e.disconnected=1,e.disconnect(e.name)))}),E(function(e){return n&&e.disconnected?(e.disconnected=0,e.reconnect(e.name)):void(n||e.disconnected||(e.disconnected=1,e.disconnect(e.name)))})}function i(){var n=Jn(),e=d(xn).join(","),t=g(wn).join(",");if(e||t){e||(e=","),J();var o=b({uuid:Un,auth:cn});t&&(o["channel-group"]=t);var c=JSON.stringify(Cn);c.length>2&&(o.state=JSON.stringify(Cn)),On&&(o.heartbeat=On),Rn&&(o.instanceid=Hn),O(),_n=Nn({timeout:x,callback:n,fail:function(n){n&&n.error&&n.service?(N(n,y),r(1)):Wn.time(function(e){!e&&N(n,y),r(e)})},data:b(o),url:[pn,"subscribe",on,h(e),n,kn],success:function(n){if(!n||"object"==typeof n&&"error"in n&&n.error)return y(n.error),a(hn,G);if(v(n[1]),kn=!kn&&mn&&jn.get(on)||n[1],P(function(n){n.connected||(n.connected=1,n.connect(n.name))}),E(function(n){n.connected||(n.connected=1,n.connect(n.name))}),Sn&&!mn)return kn=0,Sn=!1,jn.set(on,0),void a(i,w);k&&(kn=1e4,k=0),jn.set(on,n[1]);var e=function(){var e="",t="";n.length>3?(e=n[3],t=n[2]):e=n.length>2?n[2]:f(d(xn),function(e){return f(Array(n[0].length).join(",").split(","),function(){return e})}).join(",");var r=e.split(","),i=t?t.split(","):[];return function(){var n=r.shift()||bn,e=i.shift(),t={};e?(n&&n.indexOf("-pnpres")>=0&&e.indexOf("-pnpres")<0&&(e+="-pnpres"),t=wn[e]||xn[e]||{callback:function(){}}):t=xn[n];var o=[t.callback||vn,n.split(U)[0]];return e&&o.push(e.split(U)[0]),o}}(),t=H(+n[1]);l(n[0],function(r){var i=e(),o=C(r,xn[i[1]]?xn[i[1]].cipher_key:null);i[0]&&i[0](o,n,i[2]||i[1],t,i[1])}),a(i,w)}})}}var o=n.channel,c=n.channel_group,e=e||n.callback,e=e||n.message,u=n.connect||function(){},s=n.reconnect||function(){},p=n.disconnect||function(){},y=n.error||y||function(){},v=n.idle||function(){},_=n.presence||0,m=n.noheresync||0,k=n.backfill||0,S=n.timetoken||0,x=n.timeout||Z,w=n.windowing||Y,B=n.state,M=n.heartbeat||n.pnexpires,A=n.heartbeat_interval,L=n.restore||mn;return cn=n.auth_key||cn,mn=L,kn=S,o||c?e?on?((M||0===M||A||0===A)&&Wn.set_heartbeat(M,A),o&&l((o.join?o.join(","):""+o).split(","),function(r){var i=xn[r]||{};xn[bn=r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:vn=e,cipher_key:n.cipher_key,connect:u,disconnect:p,reconnect:s},B&&(r in B?Cn[r]=B[r]:Cn[r]=B),_&&(Wn.subscribe({channel:r+U,callback:_,restore:L}),i.subscribed||m||Wn.here_now({channel:r,data:b({uuid:Un,auth:cn}),callback:function(n){l("uuids"in n?n.uuids:[],function(e){_({action:"join",uuid:e,timestamp:Math.floor(t()/1e3),occupancy:n.occupancy||1},n,r)})}}))}),c&&l((c.join?c.join(","):""+c).split(","),function(r){var i=wn[r]||{};wn[r]={name:r,connected:i.connected,disconnected:i.disconnected,subscribed:1,callback:vn=e,cipher_key:n.cipher_key,connect:u,disconnect:p,reconnect:s},_&&(Wn.subscribe({channel_group:r+U,callback:_,restore:L,auth_key:cn}),i.subscribed||m||Wn.here_now({channel_group:r,data:b({uuid:Un,auth:cn}),callback:function(n){l("uuids"in n?n.uuids:[],function(e){_({action:"join",uuid:e,timestamp:Math.floor(t()/1e3),occupancy:n.occupancy||1},n,r)})}}))}),hn=function(){J(),a(i,w)},j?void hn():T.push(hn)):Dn("Missing Subscribe Key"):Dn("Missing Callback"):Dn("Missing Channel")},here_now:function(n,e){var e=n.callback||e,t=n.debug,r=n.error||function(){},i=n.auth_key||cn,o=n.channel,c=n.channel_group,a=Jn(),u="uuids"in n?n.uuids:!0,s=n.state,l={uuid:Un,auth:i};if(u||(l.disable_uuids=1),s&&(l.state=1),!e)return Dn("Missing Callback");if(!on)return Dn("Missing Subscribe Key");var f=[fn,"v2","presence","sub_key",on];o&&f.push("channel")&&f.push(h(o)),"0"!=a&&(l.callback=a),c&&(l["channel-group"]=c,!o&&f.push("channel")&&f.push(",")),Rn&&(l.instanceid=Hn),Nn({callback:a,data:b(l),success:function(n){A(n,e,r)},fail:function(n){N(n,r)},debug:t,url:f})},where_now:function(n,e){var e=n.callback||e,t=n.error||function(){},r=n.auth_key||cn,i=Jn(),o=n.uuid||Un,c={auth:r};return e?on?("0"!=i&&(c.callback=i),Rn&&(c.instanceid=Hn),void Nn({callback:i,data:b(c),success:function(n){A(n,e,t)},fail:function(n){N(n,t)},url:[fn,"v2","presence","sub_key",on,"uuid",h(o)]})):Dn("Missing Subscribe Key"):Dn("Missing Callback")},state:function(n,e){var t,e=n.callback||e||function(n){},r=n.error||function(){},i=n.auth_key||cn,o=Jn(),c=n.state,a=n.uuid||Un,u=n.channel,s=n.channel_group,l=b({auth:i});return on?a?u||s?("0"!=o&&(l.callback=o),"undefined"!=typeof u&&xn[u]&&xn[u].subscribed&&c&&(Cn[u]=c),"undefined"!=typeof s&&wn[s]&&wn[s].subscribed&&(c&&(Cn[s]=c),l["channel-group"]=s,u||(u=",")),l.state=JSON.stringify(c),Rn&&(l.instanceid=Hn),t=c?[fn,"v2","presence","sub-key",on,"channel",u,"uuid",a,"data"]:[fn,"v2","presence","sub-key",on,"channel",u,"uuid",h(a)],void Nn({callback:o,data:b(l),success:function(n){A(n,e,r)},fail:function(n){N(n,r)},url:t})):Dn("Missing Channel"):Dn("Missing UUID"):Dn("Missing Subscribe Key")},grant:function(n,e){var e=n.callback||e,t=n.error||function(){},r=n.channel||n.channels,i=n.channel_group,o=Jn(),c=n.ttl,a=n.read?"1":"0",u=n.write?"1":"0",l=n.manage?"1":"0",f=n.auth_key||n.auth_keys;if(!e)return Dn("Missing Callback");if(!on)return Dn("Missing Subscribe Key");if(!rn)return Dn("Missing Publish Key");if(!an)return Dn("Missing Secret Key");var p=Math.floor((new Date).getTime()/1e3),h=on+"\n"+rn+"\ngrant\n",d={w:u,r:a,timestamp:p};n.manage&&(d.m=l),s(r)&&(r=r.join(",")),s(f)&&(f=f.join(",")),"undefined"!=typeof r&&null!=r&&r.length>0&&(d.channel=r),"undefined"!=typeof i&&null!=i&&i.length>0&&(d["channel-group"]=i),"0"!=o&&(d.callback=o),(c||0===c)&&(d.ttl=c),f&&(d.auth=f),d=b(d),f||delete d.auth,h+=S(d);var g=un(h,an);g=g.replace(/\+/g,"-"),g=g.replace(/\//g,"_"),d.signature=g,Nn({callback:o,data:d,success:function(n){A(n,e,t)},fail:function(n){N(n,t)},url:[fn,"v1","auth","grant","sub-key",on]})},mobile_gw_provision:function(n){var e,t,r=n.callback||function(){},i=n.auth_key||cn,o=n.error||function(){},c=Jn(),a=n.channel,u=n.op,s=n.gw_type,l=n.device_id;return l?s?u?a?rn?on?(t=[fn,"v1/push/sub-key",on,"devices",l],e={uuid:Un,auth:i,type:s},"add"==u?e.add=a:"remove"==u&&(e.remove=a),Rn&&(data.instanceid=Hn),void Nn({callback:c,data:e,success:function(n){A(n,r,o)},fail:function(n){N(n,o)},url:t})):Dn("Missing Subscribe Key"):Dn("Missing Publish Key"):Dn("Missing gw destination Channel (channel)"):Dn("Missing GW Operation (op: add or remove)"):Dn("Missing GW Type (gw_type: gcm or apns)"):Dn("Missing Device ID (device_id)")},audit:function(n,e){var e=n.callback||e,t=n.error||function(){},r=n.channel,i=n.channel_group,o=n.auth_key,c=Jn();if(!e)return Dn("Missing Callback");if(!on)return Dn("Missing Subscribe Key");if(!rn)return Dn("Missing Publish Key");if(!an)return Dn("Missing Secret Key");var a=Math.floor((new Date).getTime()/1e3),u=on+"\n"+rn+"\naudit\n",s={timestamp:a};"0"!=c&&(s.callback=c),"undefined"!=typeof r&&null!=r&&r.length>0&&(s.channel=r),"undefined"!=typeof i&&null!=i&&i.length>0&&(s["channel-group"]=i),o&&(s.auth=o),s=b(s),o||delete s.auth,u+=S(s);var l=un(u,an);l=l.replace(/\+/g,"-"),l=l.replace(/\//g,"_"),s.signature=l,Nn({callback:c,data:s,success:function(n){A(n,e,t)},fail:function(n){N(n,t)},url:[fn,"v1","auth","audit","sub-key",on]})},revoke:function(n,e){n.read=!1,n.write=!1,Wn.grant(n,e)},set_uuid:function(n){Un=n,hn()},get_uuid:function(){return Un},isArray:function(n){return s(n)},get_subscribed_channels:function(){return d(xn,!0)},presence_heartbeat:function(n){var e=n.callback||function(){},t=n.error||function(){},r=Jn(),i={uuid:Un,auth:cn},o=JSON.stringify(Cn);o.length>2&&(i.state=JSON.stringify(Cn)),On>0&&320>On&&(i.heartbeat=On),"0"!=r&&(i.callback=r);var c=h(d(xn,!0).join(",")),a=g(wn,!0).join(",");c||(c=","),a&&(i["channel-group"]=a),Rn&&(i.instanceid=Hn),Nn({callback:r,data:b(i),url:[fn,"v2","presence","sub-key",on,"channel",c,"heartbeat"],success:function(n){A(n,e,t)},fail:function(n){N(n,t)}})},stop_timers:function(){clearTimeout(W),clearTimeout(Q),clearTimeout(Bn)},shutdown:function(){Wn.stop_timers(),Kn&&Kn()},xdr:Nn,ready:y,db:jn,uuid:u,map:f,each:l,"each-channel":P,grep:o,offline:function(){J(1,{message:"Offline. Please check your network settings."})},supplant:c,now:t,unique:e,updater:i};return Un||(Un=Wn.uuid()),Hn||(Hn=Wn.uuid()),jn.set(on+"uuid",Un),W=a(D,G),Q=a(z,nn),Bn=a(O,(Mn-3)*G),F(),Wn}function _(){function n(n){return CryptoJS.SHA256(n).toString(CryptoJS.enc.Hex)}function e(n){return n=n||{},n.hasOwnProperty("encryptKey")||(n.encryptKey=l.encryptKey),n.hasOwnProperty("keyEncoding")||(n.keyEncoding=l.keyEncoding),n.hasOwnProperty("keyLength")||(n.keyLength=l.keyLength),n.hasOwnProperty("mode")||(n.mode=l.mode),-1==a.indexOf(n.keyEncoding.toLowerCase())&&(n.keyEncoding=l.keyEncoding),-1==u.indexOf(parseInt(n.keyLength,10))&&(n.keyLength=l.keyLength),-1==s.indexOf(n.mode.toLowerCase())&&(n.mode=l.mode),n}function t(n,e){return"base64"==e.keyEncoding?CryptoJS.enc.Base64.parse(n):"hex"==e.keyEncoding?CryptoJS.enc.Hex.parse(n):n}function r(e,r){return e=t(e,r),r.encryptKey?CryptoJS.enc.Utf8.parse(n(e).slice(0,32)):e}function i(n){return"ecb"==n.mode?CryptoJS.mode.ECB:CryptoJS.mode.CBC}function o(n){return"cbc"==n.mode?CryptoJS.enc.Utf8.parse(c):null}var c="0123456789012345",a=["hex","utf8","base64","binary"],u=[128,256],s=["ecb","cbc"],l={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(n,t,c){if(!t)return n;c=e(c);var a=o(c),u=i(c),s=r(t,c),l=JSON.stringify(n),f=CryptoJS.AES.encrypt(l,s,{iv:a,mode:u}).ciphertext,p=f.toString(CryptoJS.enc.Base64);return p||n},decrypt:function(n,t,c){if(!t)return n;c=e(c);var a=o(c),u=i(c),s=r(t,c);try{var l=CryptoJS.enc.Base64.parse(n),f=CryptoJS.AES.decrypt({ciphertext:l},s,{iv:a,mode:u}).toString(CryptoJS.enc.Utf8),p=JSON.parse(f);return p}catch(h){return}}}}function m(n,e){var t=CryptoJS.HmacSHA256(n,e);return t.toString(CryptoJS.enc.Base64)}function S(n){return document.getElementById(n)}function x(n){console.error(n)}function w(n,e){var t=[];return l(n.split(/\s+/),function(n){l((e||document).getElementsByTagName(n),function(n){t.push(n)})}),t}function C(n,e,t){l(n.split(","),function(n){var r=function(n){n||(n=window.event),t(n)||(n.cancelBubble=!0,n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation())};e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent?e.attachEvent("on"+n,r):e["on"+n]=r})}function B(){return w("head")[0]}function O(n,e,t){return t?void n.setAttribute(e,t):n&&n.getAttribute&&n.getAttribute(e)}function M(n,e){for(var t in e)if(e.hasOwnProperty(t))try{n.style[t]=e[t]+("|width|height|top|left|".indexOf(t)>0&&"number"==typeof e[t]?"px":"")}catch(r){}}function E(n){return document.createElement(n)}function P(){return tn||z()?0:e()}function A(n){if(tn||z())return N(n);var t=E("script"),i=n.callback,o=e(),c=0,u=n.timeout||H,s=a(function(){d(1,{message:"timeout"})},u),l=n.fail||function(){},f=n.data||{},p=n.success||function(){},h=function(){B().appendChild(t)},d=function(n,e){c||(c=1,t.onerror=null,clearTimeout(s),n||!e||p(e),a(function(){n&&l();var e=S(o),t=e&&e.parentNode;t&&t.removeChild(e)},G))};return window[i]=function(n){d(0,n)},n.blocking||(t[Z]=Z),t.onerror=function(){d(1)},t.src=r(n.url,f),O(t,"id",o),h(),d}function N(n){var e,t,i=function(){if(!c){c=1,clearTimeout(s);try{t=JSON.parse(e.responseText)}catch(n){return d(1)}o=1,p(t)}},o=0,c=0,u=n.timeout||H,s=a(function(){d(1,{message:"timeout"})},u),l=n.fail||function(){},f=n.data||{},p=n.success||function(){},h=!n.blocking,d=function(n,t){o||(o=1,clearTimeout(s),e&&(e.onerror=e.onload=null,e.abort&&e.abort(),e=null),n&&l(t))};try{e=z()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest,e.onerror=e.onabort=function(n){d(1,n||e&&e.responseText||{error:"Network Connection Error"})},e.onload=e.onloadend=i,e.onreadystatechange=function(){if(e&&4==e.readyState)switch(e.status){case 200:break;default:var n=e.responseText,r=e.status;try{t=JSON.parse(n),d(1,t)}catch(i){return d(1,{status:r,payload:null,message:n})}return}};var g=r(n.url,f);e.open("GET",g,h),h&&(e.timeout=u),e.send()}catch(y){return d(0),tn=0,A(n)}return d}function L(){if(!("onLine"in navigator))return 1;try{return navigator.onLine}catch(n){return!0}}function D(n){return"sendBeacon"in navigator?navigator.sendBeacon(n):!1}function z(){if(!sn||!sn.get)return 0;var n={id:z.id++,send:function(){},abort:function(){n.id={}},open:function(e,t){z[n.id]=n,sn.get(n.id,t)}};return n}var J=1,j=!1,T=[],U="-pnpres",R=10,H=15e3,K=310,I=60,G=1e3,F="/",W="&",X=5,q=30,V="'3.8.0'".replace(/'/g,""),Q=/{([\w\-]+)}/g,$=function(){var n=20,e=Math.floor(Math.random()*n);return function(t,r){return t.indexOf("pubsub.")>0&&t.replace("pubsub","ps"+(r?u().split("-")[0]:++e<n?e:e=1))||t}}();"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports={PN_API:b,unique:e,PNmessage:v,DEF_TIMEOUT:H,timeout:a,build_url:r,each:l,uuid:u,URLBIT:F});var Y="https://pubnub.a.ssl.fastly.net/pubnub.swf",Z="async",nn=navigator.userAgent,en="PubNub-JS-Web/3.8.0",tn=-1==nn.indexOf("MSIE 6");window.console||(window.console=window.console||{}),console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var rn=function(){var n={},e=!1;try{e=window.localStorage}catch(t){}var r=function(n){return-1==document.cookie.indexOf(n)?null:((document.cookie||"").match(RegExp(n+"=([^;]+)"))||[])[1]||null},i=function(n,e){document.cookie=n+"="+e+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"},o=function(){try{return i("pnctest","1"),"1"===r("pnctest")}catch(n){return!1}}();return{get:function(t){try{return e?e.getItem(t):o?r(t):n[t]}catch(i){return n[t]}},set:function(t,r){try{if(e)return e.setItem(t,r)&&0;o&&i(t,r),n[t]=r}catch(c){n[t]=r}}}}(),on={list:{},unbind:function(n){on.list[n]=[]},bind:function(n,e){(on.list[n]=on.list[n]||[]).push(e)},fire:function(n,e){l(on.list[n]||[],function(n){n(e)})}},cn=S("pubnub")||0,an=function(n){tn=n.jsonp?0:-1==nn.indexOf("MSIE 6");var e=n.subscribe_key||"",t=((+n.keepalive||I)*G,n.uuid||rn.get(e+"uuid")||"",n.leave_on_unload||0);n.xdr=A,n.db=rn,n.error=n.error||x,n._is_online=L,n.jsonp_cb=P,n.hmac_SHA256=m,n.crypto_obj=_(),n.sendBeacon=D,n.params={pnsdk:en};var r=function(n){return an(n)},i=b(n);for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o]);return r.css=M,r.$=S,r.create=E,r.bind=C,r.head=B,r.search=w,r.attr=O,r.events=on,r.init=r,r.secure=r,r.crypto_obj=_(),C("beforeunload",window,function(){return t&&r["each-channel"](function(n){r.LEAVE(n.name,0)}),!0}),n.notest?r:(C("offline",window,r.offline),C("offline",document,r.offline),r)};an.init=an,an.secure=an,an.crypto_obj=_(),"complete"===document.readyState?a(y,0):C("load",window,function(){a(y,0)});var un=cn||{};PUBNUB=an({notest:1,publish_key:O(un,"pub-key"),subscribe_key:O(un,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==O(un,"ssl"),origin:O(un,"origin"),uuid:O(un,"uuid")}),window.jQuery&&(window.jQuery.PUBNUB=an),"undefined"!=typeof module&&(module.exports=PUBNUB)&&y();var sn=S("pubnubs")||0;cn&&(M(cn,{position:"absolute",top:-G}),("opera"in window||O(cn,"flash"))&&(cn.innerHTML="<object id=pubnubs data="+Y+"><param name=movie value="+Y+"><param name=allowscriptaccess value=always></object>"),PUBNUB.rdx=function(n,e){return e?(z[n].responseText=unescape(e),void z[n].onload()):z[n].onerror()},z.id=G)}(),function(){var n=PUBNUB.ws=function(e,t){if(!(this instanceof n))return new n(e,t);var r=this,e=r.url=e||"",i=(r.protocol=t||"Sec-WebSocket-Protocol",e.split("/")),o={ssl:"wss:"===i[0],origin:i[2],publish_key:i[3],subscribe_key:i[4],channel:i[5]};return r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.CLOSE_NORMAL=1e3,r.CLOSE_GOING_AWAY=1001,r.CLOSE_PROTOCOL_ERROR=1002,r.CLOSE_UNSUPPORTED=1003,r.CLOSE_TOO_LARGE=1004,r.CLOSE_NO_STATUS=1005,r.CLOSE_ABNORMAL=1006,r.onclose=r.onerror=r.onmessage=r.onopen=r.onsend=function(){},r.binaryType="",r.extensions="",r.bufferedAmount=0,r.trasnmitting=!1,r.buffer=[],r.readyState=r.CONNECTING,e?(r.pubnub=PUBNUB.init(o),r.pubnub.setup=o,r.setup=o,void r.pubnub.subscribe({restore:!1,channel:o.channel,disconnect:r.onerror,reconnect:r.onopen,error:function(){r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(n){r.onmessage({data:n})},connect:function(){r.readyState=r.OPEN,r.onopen()}})):(r.readyState=r.CLOSED,r.onclose({code:r.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),r)};n.prototype.send=function(n){var e=this;e.pubnub.publish({channel:e.pubnub.setup.channel,message:n,callback:function(n){e.onsend({data:n})}})},n.prototype.close=function(){var n=this;n.pubnub.unsubscribe({channel:n.pubnub.setup.channel}),n.readyState=n.CLOSED,n.onclose({})}}();var CryptoJS=CryptoJS||function(n,e){var t={},r=t.lib={},i=function(){},o=r.Base={extend:function(n){i.prototype=this;var e=new i;return n&&e.mixIn(n),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var e in n)n.hasOwnProperty(e)&&(this[e]=n[e]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}},c=r.WordArray=o.extend({init:function(n,t){n=this.words=n||[],this.sigBytes=t!=e?t:4*n.length},toString:function(n){return(n||u).stringify(this)},concat:function(n){var e=this.words,t=n.words,r=this.sigBytes;if(n=n.sigBytes,this.clamp(),r%4)for(var i=0;n>i;i++)e[r+i>>>2]|=(t[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<t.length)for(i=0;n>i;i+=4)e[r+i>>>2]=t[i>>>2];else e.push.apply(e,t);return this.sigBytes+=n,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-8*(t%4),e.length=n.ceil(t/4)},clone:function(){var n=o.clone.call(this);return n.words=this.words.slice(0),n},random:function(e){for(var t=[],r=0;e>r;r+=4)t.push(4294967296*n.random()|0);return new c.init(t,e)}}),a=t.enc={},u=a.Hex={stringify:function(n){var e=n.words;n=n.sigBytes;for(var t=[],r=0;n>r;r++){var i=e[r>>>2]>>>24-8*(r%4)&255;t.push((i>>>4).toString(16)),t.push((15&i).toString(16))}return t.join("")},parse:function(n){for(var e=n.length,t=[],r=0;e>r;r+=2)t[r>>>3]|=parseInt(n.substr(r,2),16)<<24-4*(r%8);return new c.init(t,e/2)}},s=a.Latin1={stringify:function(n){var e=n.words;n=n.sigBytes;for(var t=[],r=0;n>r;r++)t.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return t.join("")},parse:function(n){for(var e=n.length,t=[],r=0;e>r;r++)t[r>>>2]|=(255&n.charCodeAt(r))<<24-8*(r%4);return new c.init(t,e)}},l=a.Utf8={stringify:function(n){try{return decodeURIComponent(escape(s.stringify(n)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(n){return s.parse(unescape(encodeURIComponent(n)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(n){"string"==typeof n&&(n=l.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes},_process:function(e){var t=this._data,r=t.words,i=t.sigBytes,o=this.blockSize,a=i/(4*o),a=e?n.ceil(a):n.max((0|a)-this._minBufferSize,0);if(e=a*o,i=n.min(4*e,i),e){for(var u=0;e>u;u+=o)this._doProcessBlock(r,u);u=r.splice(0,e),t.sigBytes-=i}return new c.init(u,i)},clone:function(){var n=o.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(n){this.cfg=this.cfg.extend(n),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(n){return this._append(n),this._process(),this},finalize:function(n){return n&&this._append(n),this._doFinalize();
},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new p.HMAC.init(n,t).finalize(e)}}});var p=t.algo={};return t}(Math);!function(n){for(var e=CryptoJS,t=e.lib,r=t.WordArray,i=t.Hasher,t=e.algo,o=[],c=[],a=function(n){return 4294967296*(n-(0|n))|0},u=2,s=0;64>s;){var l;n:{l=u;for(var f=n.sqrt(l),p=2;f>=p;p++)if(!(l%p)){l=!1;break n}l=!0}l&&(8>s&&(o[s]=a(n.pow(u,.5))),c[s]=a(n.pow(u,1/3)),s++),u++}var h=[],t=t.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(n,e){for(var t=this._hash.words,r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],l=t[6],f=t[7],p=0;64>p;p++){if(16>p)h[p]=0|n[e+p];else{var d=h[p-15],g=h[p-2];h[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+h[p-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+h[p-16]}d=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&s^~u&l)+c[p]+h[p],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),f=l,l=s,s=u,u=a+d|0,a=o,o=i,i=r,r=d+g|0}t[0]=t[0]+r|0,t[1]=t[1]+i|0,t[2]=t[2]+o|0,t[3]=t[3]+a|0,t[4]=t[4]+u|0,t[5]=t[5]+s|0,t[6]=t[6]+l|0,t[7]=t[7]+f|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=n.floor(r/4294967296),t[(i+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var n=i.clone.call(this);return n._hash=this._hash.clone(),n}});e.SHA256=i._createHelper(t),e.HmacSHA256=i._createHmacHelper(t)}(Math),function(){var n=CryptoJS,e=n.enc.Utf8;n.algo.HMAC=n.lib.Base.extend({init:function(n,t){n=this._hasher=new n.init,"string"==typeof t&&(t=e.parse(t));var r=n.blockSize,i=4*r;t.sigBytes>i&&(t=n.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),c=this._iKey=t.clone(),a=o.words,u=c.words,s=0;r>s;s++)a[s]^=1549556828,u[s]^=909522486;o.sigBytes=c.sigBytes=i,this.reset()},reset:function(){var n=this._hasher;n.reset(),n.update(this._iKey)},update:function(n){return this._hasher.update(n),this},finalize:function(n){var e=this._hasher;return n=e.finalize(n),e.reset(),e.finalize(this._oKey.clone().concat(n))}})}(),function(){var n=CryptoJS,e=n.lib.WordArray;n.enc.Base64={stringify:function(n){var e=n.words,t=n.sigBytes,r=this._map;n.clamp(),n=[];for(var i=0;t>i;i+=3)for(var o=(e[i>>>2]>>>24-8*(i%4)&255)<<16|(e[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|e[i+2>>>2]>>>24-8*((i+2)%4)&255,c=0;4>c&&t>i+.75*c;c++)n.push(r.charAt(o>>>6*(3-c)&63));if(e=r.charAt(64))for(;n.length%4;)n.push(e);return n.join("")},parse:function(n){var t=n.length,r=this._map,i=r.charAt(64);i&&(i=n.indexOf(i),-1!=i&&(t=i));for(var i=[],o=0,c=0;t>c;c++)if(c%4){var a=r.indexOf(n.charAt(c-1))<<2*(c%4),u=r.indexOf(n.charAt(c))>>>6-2*(c%4);i[o>>>2]|=(a|u)<<24-8*(o%4),o++}return e.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(n){function e(n,e,t,r,i,o,c){return n=n+(e&t|~e&r)+i+c,(n<<o|n>>>32-o)+e}function t(n,e,t,r,i,o,c){return n=n+(e&r|t&~r)+i+c,(n<<o|n>>>32-o)+e}function r(n,e,t,r,i,o,c){return n=n+(e^t^r)+i+c,(n<<o|n>>>32-o)+e}function i(n,e,t,r,i,o,c){return n=n+(t^(e|~r))+i+c,(n<<o|n>>>32-o)+e}for(var o=CryptoJS,c=o.lib,a=c.WordArray,u=c.Hasher,c=o.algo,s=[],l=0;64>l;l++)s[l]=4294967296*n.abs(n.sin(l+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(n,o){for(var c=0;16>c;c++){var a=o+c,u=n[a];n[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,a=n[o+0],u=n[o+1],l=n[o+2],f=n[o+3],p=n[o+4],h=n[o+5],d=n[o+6],g=n[o+7],y=n[o+8],v=n[o+9],b=n[o+10],_=n[o+11],m=n[o+12],k=n[o+13],S=n[o+14],x=n[o+15],w=c[0],C=c[1],B=c[2],O=c[3],w=e(w,C,B,O,a,7,s[0]),O=e(O,w,C,B,u,12,s[1]),B=e(B,O,w,C,l,17,s[2]),C=e(C,B,O,w,f,22,s[3]),w=e(w,C,B,O,p,7,s[4]),O=e(O,w,C,B,h,12,s[5]),B=e(B,O,w,C,d,17,s[6]),C=e(C,B,O,w,g,22,s[7]),w=e(w,C,B,O,y,7,s[8]),O=e(O,w,C,B,v,12,s[9]),B=e(B,O,w,C,b,17,s[10]),C=e(C,B,O,w,_,22,s[11]),w=e(w,C,B,O,m,7,s[12]),O=e(O,w,C,B,k,12,s[13]),B=e(B,O,w,C,S,17,s[14]),C=e(C,B,O,w,x,22,s[15]),w=t(w,C,B,O,u,5,s[16]),O=t(O,w,C,B,d,9,s[17]),B=t(B,O,w,C,_,14,s[18]),C=t(C,B,O,w,a,20,s[19]),w=t(w,C,B,O,h,5,s[20]),O=t(O,w,C,B,b,9,s[21]),B=t(B,O,w,C,x,14,s[22]),C=t(C,B,O,w,p,20,s[23]),w=t(w,C,B,O,v,5,s[24]),O=t(O,w,C,B,S,9,s[25]),B=t(B,O,w,C,f,14,s[26]),C=t(C,B,O,w,y,20,s[27]),w=t(w,C,B,O,k,5,s[28]),O=t(O,w,C,B,l,9,s[29]),B=t(B,O,w,C,g,14,s[30]),C=t(C,B,O,w,m,20,s[31]),w=r(w,C,B,O,h,4,s[32]),O=r(O,w,C,B,y,11,s[33]),B=r(B,O,w,C,_,16,s[34]),C=r(C,B,O,w,S,23,s[35]),w=r(w,C,B,O,u,4,s[36]),O=r(O,w,C,B,p,11,s[37]),B=r(B,O,w,C,g,16,s[38]),C=r(C,B,O,w,b,23,s[39]),w=r(w,C,B,O,k,4,s[40]),O=r(O,w,C,B,a,11,s[41]),B=r(B,O,w,C,f,16,s[42]),C=r(C,B,O,w,d,23,s[43]),w=r(w,C,B,O,v,4,s[44]),O=r(O,w,C,B,m,11,s[45]),B=r(B,O,w,C,x,16,s[46]),C=r(C,B,O,w,l,23,s[47]),w=i(w,C,B,O,a,6,s[48]),O=i(O,w,C,B,g,10,s[49]),B=i(B,O,w,C,S,15,s[50]),C=i(C,B,O,w,h,21,s[51]),w=i(w,C,B,O,m,6,s[52]),O=i(O,w,C,B,f,10,s[53]),B=i(B,O,w,C,b,15,s[54]),C=i(C,B,O,w,u,21,s[55]),w=i(w,C,B,O,y,6,s[56]),O=i(O,w,C,B,x,10,s[57]),B=i(B,O,w,C,d,15,s[58]),C=i(C,B,O,w,k,21,s[59]),w=i(w,C,B,O,p,6,s[60]),O=i(O,w,C,B,_,10,s[61]),B=i(B,O,w,C,l,15,s[62]),C=i(C,B,O,w,v,21,s[63]);c[0]=c[0]+w|0,c[1]=c[1]+C|0,c[2]=c[2]+B|0,c[3]=c[3]+O|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32;var o=n.floor(r/4294967296);for(t[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash,t=e.words,r=0;4>r;r++)i=t[r],t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var n=u.clone.call(this);return n._hash=this._hash.clone(),n}}),o.MD5=u._createHelper(c),o.HmacMD5=u._createHmacHelper(c)}(Math),function(){var n=CryptoJS,e=n.lib,t=e.Base,r=e.WordArray,e=n.algo,i=e.EvpKDF=t.extend({cfg:t.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(n){this.cfg=this.cfg.extend(n)},compute:function(n,e){for(var t=this.cfg,i=t.hasher.create(),o=r.create(),c=o.words,a=t.keySize,t=t.iterations;c.length<a;){u&&i.update(u);var u=i.update(n).finalize(e);i.reset();for(var s=1;t>s;s++)u=i.finalize(u),i.reset();o.concat(u)}return o.sigBytes=4*a,o}});n.EvpKDF=function(n,e,t){return i.create(t).compute(n,e)}}(),CryptoJS.lib.Cipher||function(n){var e=CryptoJS,t=e.lib,r=t.Base,i=t.WordArray,o=t.BufferedBlockAlgorithm,c=e.enc.Base64,a=e.algo.EvpKDF,u=t.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(n,e){return this.create(this._ENC_XFORM_MODE,n,e)},createDecryptor:function(n,e){return this.create(this._DEC_XFORM_MODE,n,e)},init:function(n,e,t){this.cfg=this.cfg.extend(t),this._xformMode=n,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(n){return this._append(n),this._process()},finalize:function(n){return n&&this._append(n),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(e,t,r){return("string"==typeof t?d:h).encrypt(n,e,t,r)},decrypt:function(e,t,r){return("string"==typeof t?d:h).decrypt(n,e,t,r)}}}});t.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var s=e.mode={},l=function(e,t,r){var i=this._iv;i?this._iv=n:i=this._prevBlock;for(var o=0;r>o;o++)e[t+o]^=i[o]},f=(t.BlockCipherMode=r.extend({createEncryptor:function(n,e){return this.Encryptor.create(n,e)},createDecryptor:function(n,e){return this.Decryptor.create(n,e)},init:function(n,e){this._cipher=n,this._iv=e}})).extend();f.Encryptor=f.extend({processBlock:function(n,e){var t=this._cipher,r=t.blockSize;l.call(this,n,e,r),t.encryptBlock(n,e),this._prevBlock=n.slice(e,e+r)}}),f.Decryptor=f.extend({processBlock:function(n,e){var t=this._cipher,r=t.blockSize,i=n.slice(e,e+r);t.decryptBlock(n,e),l.call(this,n,e,r),this._prevBlock=i}}),s=s.CBC=f,f=(e.pad={}).Pkcs7={pad:function(n,e){for(var t=4*e,t=t-n.sigBytes%t,r=t<<24|t<<16|t<<8|t,o=[],c=0;t>c;c+=4)o.push(r);t=i.create(o,t),n.concat(t)},unpad:function(n){n.sigBytes-=255&n.words[n.sigBytes-1>>>2]}},t.BlockCipher=u.extend({cfg:u.cfg.extend({mode:s,padding:f}),reset:function(){u.reset.call(this);var n=this.cfg,e=n.iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var t=n.createEncryptor;else t=n.createDecryptor,this._minBufferSize=1;this._mode=t.call(n,this,e&&e.words)},_doProcessBlock:function(n,e){this._mode.processBlock(n,e)},_doFinalize:function(){var n=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){n.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),n.unpad(e);return e},blockSize:4});var p=t.CipherParams=r.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}}),s=(e.format={}).OpenSSL={stringify:function(n){var e=n.ciphertext;return n=n.salt,(n?i.create([1398893684,1701076831]).concat(n).concat(e):e).toString(c)},parse:function(n){n=c.parse(n);var e=n.words;if(1398893684==e[0]&&1701076831==e[1]){var t=i.create(e.slice(2,4));e.splice(0,4),n.sigBytes-=16}return p.create({ciphertext:n,salt:t})}},h=t.SerializableCipher=r.extend({cfg:r.extend({format:s}),encrypt:function(n,e,t,r){r=this.cfg.extend(r);var i=n.createEncryptor(t,r);return e=i.finalize(e),i=i.cfg,p.create({ciphertext:e,key:t,iv:i.iv,algorithm:n,mode:i.mode,padding:i.padding,blockSize:n.blockSize,formatter:r.format})},decrypt:function(n,e,t,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n.createDecryptor(t,r).finalize(e.ciphertext)},_parse:function(n,e){return"string"==typeof n?e.parse(n,this):n}}),e=(e.kdf={}).OpenSSL={execute:function(n,e,t,r){return r||(r=i.random(8)),n=a.create({keySize:e+t}).compute(n,r),t=i.create(n.words.slice(e),4*t),n.sigBytes=4*e,p.create({key:n,iv:t,salt:r})}},d=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:e}),encrypt:function(n,e,t,r){return r=this.cfg.extend(r),t=r.kdf.execute(t,n.keySize,n.ivSize),r.iv=t.iv,n=h.encrypt.call(this,n,e,t.key,r),n.mixIn(t),n},decrypt:function(n,e,t,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t=r.kdf.execute(t,n.keySize,n.ivSize,e.salt),r.iv=t.iv,h.decrypt.call(this,n,e,t.key,r)}})}(),function(){for(var n=CryptoJS,e=n.lib.BlockCipher,t=n.algo,r=[],i=[],o=[],c=[],a=[],u=[],s=[],l=[],f=[],p=[],h=[],d=0;256>d;d++)h[d]=128>d?d<<1:d<<1^283;for(var g=0,y=0,d=0;256>d;d++){var v=y^y<<1^y<<2^y<<3^y<<4,v=v>>>8^255&v^99;r[g]=v,i[v]=g;var b=h[g],_=h[b],m=h[_],k=257*h[v]^16843008*v;o[g]=k<<24|k>>>8,c[g]=k<<16|k>>>16,a[g]=k<<8|k>>>24,u[g]=k,k=16843009*m^65537*_^257*b^16843008*g,s[v]=k<<24|k>>>8,l[v]=k<<16|k>>>16,f[v]=k<<8|k>>>24,p[v]=k,g?(g=b^h[h[h[m^b]]],y^=h[h[y]]):g=y=1}var S=[0,1,2,4,8,16,32,64,128,27,54],t=t.AES=e.extend({_doReset:function(){for(var n=this._key,e=n.words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],o=0;n>o;o++)if(t>o)i[o]=e[o];else{var c=i[o-1];o%t?t>6&&4==o%t&&(c=r[c>>>24]<<24|r[c>>>16&255]<<16|r[c>>>8&255]<<8|r[255&c]):(c=c<<8|c>>>24,c=r[c>>>24]<<24|r[c>>>16&255]<<16|r[c>>>8&255]<<8|r[255&c],c^=S[o/t|0]<<24),i[o]=i[o-t]^c}for(e=this._invKeySchedule=[],t=0;n>t;t++)o=n-t,c=t%4?i[o]:i[o-4],e[t]=4>t||4>=o?c:s[r[c>>>24]]^l[r[c>>>16&255]]^f[r[c>>>8&255]]^p[r[255&c]]},encryptBlock:function(n,e){this._doCryptBlock(n,e,this._keySchedule,o,c,a,u,r)},decryptBlock:function(n,e){var t=n[e+1];n[e+1]=n[e+3],n[e+3]=t,this._doCryptBlock(n,e,this._invKeySchedule,s,l,f,p,i),t=n[e+1],n[e+1]=n[e+3],n[e+3]=t},_doCryptBlock:function(n,e,t,r,i,o,c,a){for(var u=this._nRounds,s=n[e]^t[0],l=n[e+1]^t[1],f=n[e+2]^t[2],p=n[e+3]^t[3],h=4,d=1;u>d;d++)var g=r[s>>>24]^i[l>>>16&255]^o[f>>>8&255]^c[255&p]^t[h++],y=r[l>>>24]^i[f>>>16&255]^o[p>>>8&255]^c[255&s]^t[h++],v=r[f>>>24]^i[p>>>16&255]^o[s>>>8&255]^c[255&l]^t[h++],p=r[p>>>24]^i[s>>>16&255]^o[l>>>8&255]^c[255&f]^t[h++],s=g,l=y,f=v;g=(a[s>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&p])^t[h++],y=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[p>>>8&255]<<8|a[255&s])^t[h++],v=(a[f>>>24]<<24|a[p>>>16&255]<<16|a[s>>>8&255]<<8|a[255&l])^t[h++],p=(a[p>>>24]<<24|a[s>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^t[h++],n[e]=g,n[e+1]=y,n[e+2]=v,n[e+3]=p},keySize:8});n.AES=e._createHelper(t)}(),CryptoJS.mode.ECB=function(){var n=CryptoJS.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(n,e){this._cipher.encryptBlock(n,e)}}),n.Decryptor=n.extend({processBlock:function(n,e){this._cipher.decryptBlock(n,e)}}),n}();
})();
!function(){function n(n){s.each(f,function(e){if(e in l&&n in l[e]){var c=l[e][n];c.connected&&(c.connected=!1,c.socket.user_count--,s.events.fire(e+"leave",c))}})}function e(n,c,t,o,i){var a=u(c);s.publish({channel:a.channel,message:{name:n,ns:c,data:t,uuid:r,geo:a.location||[0,0]},callback:function(u){if(u[0])return(i||function(){})(u);var s=2*(o||500);setTimeout(function(){e(n,c,t,s,i)},s>5500?5500:s)}})}function c(n,e){var c=[];return PUBNUB.each(n||[],function(n){e(n)&&c.push(n)}),c}function t(n,e,t){var o=u(n);e.channel=o.channel,s.history(e,function(e){e[0]=c(e[0],function(e){return"message"==e.name&&e.ns==n}),t(e)})}function o(n,e){var c=u(n);s.here_now({channel:c.channel},e)}function i(n){var n=n||function(){};navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){socket.location=[e.coords.latitude,e.coords.longitude],n(socket.location)})||n([0,0])}function u(n){var n=n,c=f[n]||function(){return f[n]={namespace:n,connected:!1,users:l[n]={},user_count:1,get_user_list:function(){return f[n].users},get_user_count:function(){return f[n].user_count},emit:function(c,t,o){e(c,n,t,0,o)},send:function(c,t){e("message",n,c,0,t)},on:function(e,c){"string"==typeof e?s.events.bind(n+e,c):"object"==typeof e&&s.each(e,function(e){s.events.bind(n+e,c)})},disconnect:function(){s.unsubscribe({channel:c.channel})},history:function(e,c){t(n,e,c)},here_now:function(e){o(n,e)}}}();return c}var s=PUBNUB,a=0,r=PUBNUB.db.get("uuid")||s.uuid(function(n){PUBNUB.db.set("uuid",r=n)}),d=function(){return+new Date},f={},l={},v=window.io={connected:{},connect:function(c,t){function o(){U.disconnected||(U.disconnected=1,s.each(f,function(n){s.events.fire(n+"disconnect",{})}))}function h(){var n=s.map(f,function(n){return n});e("ping",w,{nss:n,cuser:p})}var g=(c+"////").split("/"),t=t||{},p=t.user||{},b="presence"in t?t.presence:!0,m=g[2],w=(g[3]||"standard")+"-"+t.channel,B=t.channel,U=u(w);return U.channel=B,U.password="GibberishAES"in window&&t.password,B in v.connected?U:(t.geo&&setInterval(i,15e3)&&i(),t.uuid=r,t.origin=m,s=v.connected[B]=a?s:PUBNUB[U.password?"secure":"init"](t),a=1,U.disconnected=0,s.subscribe({channel:U.channel,disconnect:o,reconnect:function(){s.disconnected=0},connect:function(n,e,c){U.disconnected=0,s.each(f,function(n){var e=u(n);e.connected||(e.connected=!0,s.events.fire(n+"connect",{}))}),h()},presence:b&&function(e){"leave"===e.action&&n(e.uuid),"timeout"===e.action&&n(e.uuid),"join"===e.action&&h()},callback:function(n){U.disconnected&&s.each(f,function(n){s.events.fire(n+"reconnect",{})}),U.disconnected=0;var e=n.data;n.ns in f&&e&&s.events.fire(n.ns+n.name,e),n.uuid&&n.uuid!==r&&"ping"===n.name&&s.each(e.nss,function(c){l[c]=l[c]||{};var t=l[c][n.uuid]=l[c][n.uuid]||function(){return{geo:n.geo||[0,0],uuid:n.uuid,last:d(),socket:U,namespace:c,connected:!1,slot:U.user_count++}}();t.last=d(),t.data=e.cuser,t.connected||(s.events.fire(c+"join",t),t.connected=!0)})}}),b&&(setInterval(h,3e4),h()),U)}}}();
